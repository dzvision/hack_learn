<html>
<head>
<title>内网渗透FRP代理工具详解</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0;max-width:100%;box-sizing:border-box;}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{-webkit-touch-callout:none;font family:-apple-system-font,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei UI","Microsoft YaHei",Arial,sans-serif;color:#333;letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px;line-height:36px;}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;line-height:37px;;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:42px;;line-height:1.4;margin:10px 0;padding-bottom:10px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;line-height:35px;;line-height:35px;;line-height:35px;;line-height:35px;;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:4px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:rgba(0,0,0,0.3)}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;line-height:32px;;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;line-height:38px;;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size:15px;line-height:35px;;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}.playVideoWx{position:relative;display:block;}.icon_mid_play{position:absolute;z-index:9999;top:50%;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:48px;height:48px;background:rgba(237,237,237,0.9);border-radius:50%}.icon_mid_play:before{content:"";text-indent:-999em;display:inline-block;width:28px;height:28px;vertical-align:middle;background-size:cover;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E  %3Cpath fill='%23151515' fill-rule='evenodd' d='M9.524 4.938l10.092 6.21a1 1 0 0 1 0 1.704l-10.092 6.21A1 1 0 0 1 8 18.21V5.79a1 1 0 0 1 1.524-.852z'/%3E%3C/svg%3E")}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head>
<body>
<div class="rich_media">
                
                <h1 class="rich_media_title" id="activity-name">
                    
                    
                    
内网渗透 | FRP代理工具详解
                </h1>
                <div id="meta_content" class="rich_media_meta_list">
                                                                <span id="copyright_logo" class="rich_media_meta icon_appmsg_tag appmsg_title_tag weui-wa-hotarea">原创</span>
                                                                                            <span class="rich_media_meta rich_media_meta_text">
                                                                    想走安全的小白
                                                            </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" class=" weui-wa-hotarea" id="js_name">
                        HACK学习呀                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">HACK学习呀</strong>
                              

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">Hacker1961X</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">HACK学习，专注于互联网安全与黑客精神；渗透测试，社会工程学，Python黑客编程，资源分享，Web渗透培训，电脑技巧，渗透技巧等，为广大网络安全爱好者一个交流分享学习的平台！</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>
                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2020-11-16</em>
                </div>

                
                                                <div id="js_tags"  class="article-tag__list" style="display: none;" data-len="0">
                                            
                        <div class="article-tag-card__title">收录于话题</div>
                        <div class="article-tags">
                                                    </div>
                                    </div><div id="weixin_content"><p data-mpa-powered-by="yiban.io"><strong style="font-size:16px;line-height:36px;;">FRP工具的使用</strong><br  /></p><p><span style="font-size:16px;line-height:36px;;">FRP官方文档:https://gofrp.org/docs</span></p><p><br  /></p><h3><strong><span style="font-size:18px;line-height:38px;;">一、FRP工具的介绍</span></strong></h3><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">1.为什么需要内网穿透</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">我们的物理机、服务器可能处于路由器后或者处于内网之中。如果我们想直接访问到这些设备（远程桌面、远程文件、SSH等等），一般来说要通过一些转发或者P2P(端到端)组网软件的帮助。</span></p><p><span style="font-size:16px;line-height:36px;;">其实，对于FRP穿透工具来说，它和端口转发有所不同，端口转发是只会进行单个端口的流量转发，但是这在渗透中往往是不行的，我们通过通过FRP进行内网的全流量的数据代理，像FRP可以代理全端口、全流量的数据，这样我们就可以使用SocksCap或者Proxifier等工具进行连接。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">2.FRP介绍</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">frp 是一个可用于内网穿透的高性能的反向代理应用，支持TCP、UDP协议，为HTTP和HTTPS应用协议提供了额外的能力，且尝试性支持了点对点穿透。frp 采用go语言开发。更多的人使用 frp 是为了进行反向代理，满足通过公网服务器访问处于内网的服务，如访问内网web服务，远程ssh内网服务器，远程控制内网NAS等，实现类似花生壳、ngrok等功能。而对于内网渗透来讲，这种功能恰好能够满足我们进行内网渗透的流量转发。FRP最大的一个特点是使用SOCKS代理，而SOCKS是加密通信的，类似于做了一个加密的隧道，可以把外网的流量，通过加密隧道穿透到内网。效果有些类似于VPN。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">3.为什么使用FRP</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：</span></p><ul class="list-paddingleft-2"><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">代理组间的负载均衡。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">端口复用，多个服务通过同一个服务端端口暴露。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">多个原生支持的客户端插件(静态文件查看，HTTP、SOCK5 代理等)，便于独立使用 frp 客户端完成某些工作。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。</span></p></li><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">服务端和客户端 UI 页面。</span></p></li></ul><p><br  /></p><h3><span style="font-size:18px;line-height:38px;;"><strong>二、FRP工具原理</strong></span></h3><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">1.FRP实现原理</span></strong></h4><p><span style="font-size:16px;line-height:36px;;"><strong>frp 主要由客户端(frpc)和服务端(frps)组成，服务端通常部署在具有公网 IP 的机器上，客户端通常部署在需要穿透的内网服务所在的机器上。</strong>内网服务由于没有公网 IP，不能被非局域网内的其他用户访问。隐藏用户通过访问服务端的 frps，由 frp 负责根据请求的端口或其他信息将请求路由到对应的内网机器，从而实现通信。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">2.FRP图示</span></strong></h4><p><img data-ratio="0.5362537764350453" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/1_p1ZrV2HNjKHrcn1HgfCHmTgALiaicQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuD6RialQ8IG3iciccqM61oIwTIgLZzp1ZrV2HNjKHrcn1HgfCHmTgALiaicQ/640?wx_fmt=png'" data-type="png" data-w="1324"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">如上图所示，在目标内网(192.168.1.0网段)中，一共有多台内网服务器(使用三台进行简要说明)，其中内网WEB服务器和内网数据库服务器的端口被映射到Nginx反向代理服务器上，这样直接访问Nginx反向代理服务器的IP加上对应的端口即可访问到内网WEB服务器和内网数据库服务器。</span></p><p><span style="font-size:16px;line-height:36px;;"><br  /></span></p><p><span style="font-size:16px;line-height:36px;;">现在存在这样的一种情况，由于内网WEB服务器的端口被映射到了公网(也就是Nginx反向代理服务器的80端口上)，因此可以通过访问Nginx服务器的80端口就直接可以访问到内网的WEB服务器上的业务，如果发现WEB主机上存在漏洞，通过漏洞拿到了WEB服务器的shell，注意这个shell并不是Nginx服务器的shell，而是内网WEB服务器的shell。</span></p><p><span style="font-size:16px;line-height:36px;;"><br  /></span></p><p><span style="font-size:16px;line-height:36px;;">如果我们需要进行内网渗透，有两种思路，第一种是在内网WEB服务器上安装nmap、masscan这类工具进行扫描，第二种就是使用frp等工具进行代理，使用代理进行扫描。这里面就牵扯到两个问题，一个问题是如果拿下的这台主机是windows主机，但是在内网里面又发现了一台主机有web服务，这样怎么办？我们可以在这台主机上安装Burp和浏览器，进行抓包渗透，但是这个前提是你要可以连接RDP，也就是说内网WEB服务器的3389也是映射到公网上的，可以直接连接进行渗透；还有一个问题是如果拿下的主机是linux主机呢？怎么在linux主机上安装burp呢？这显然是不合理的，但是我们可以在拿下的这台linux主机上开启SOCKS代理，然后在本地使用SOCKS代理去连接，但是显然比较麻烦。因此，很多人在内网渗透中可能会选择使用FRP内网穿透工具来进行内网中的全流量代理，FRP是一个全流量代理，在本地可以使用SocksCap、Proxifier等工具进行连接。下面来进行说明。</span></p><p><img data-ratio="0.530751708428246" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/2_dpTeeThuCdjoF4HArEp9ib6YcOsotw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuKialbzOHV8knYpuSIfibtbbmVXiadpTeeThuCdjoF4HArEp9ib6YcOsotw/640?wx_fmt=png'" data-type="png" data-w="1317"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">首先，我们需要将FRP的服务端部署到公网VPS上，然后在我们拿下的那台内网主机上部署FRP的客户端，FRP在github上有多种版本，有些是有配置文件的，这样的话就需要在客户端和服务器端分别配置两个文件，客户端的文件分别是frpc文件和frpc.ini文件；服务器端的文件分别是frps文件和frps.ini文件。还有不需要配置文件的，这是作者经过二次开发的文件</span></p><p><span style="font-size:16px;line-height:36px;;"><br  /></span></p><p><span style="font-size:16px;line-height:36px;;">下载链接:</span></p><p><span style="font-size:16px;line-height:36px;;">https://github.com/uknowsec/frpModify。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">3.FRP工作原理介绍</span></strong></h4><p><img data-ratio="0.5244922341696535" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/3_ibGJl9bLhQWxV7s0VJsGTcLKYq4sqA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuGia5j0Rtlicmib1NV1SXK8pFRdrYibGJl9bLhQWxV7s0VJsGTcLKYq4sqA/640?wx_fmt=png'" data-type="png" data-w="837"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(1):首先启动frpc，frpc启动后会向frps注册，也就是内网WEB服务器会向VPS请求注册。</span></p><p><span style="font-size:16px;line-height:36px;;">(2):客户端请求frps，也就是当我们的攻击机去访问frps。</span></p><p><span style="font-size:16px;line-height:36px;;">(3):frps告知frpc有新请求，需要建立连接，也就是VPS告知内网WEB服务器，需要建立连接。</span></p><p><span style="font-size:16px;line-height:36px;;">(4):frps收到frpc的请求，建立新的连接，也就是VPS接收到了内网WEB服务器的请求，建立了新的连接。</span></p><p><span style="font-size:16px;line-height:36px;;">(5):frps吧frpc和攻击机的流量互相转发，将frps服务器当成流量中转站，也就是VPS将攻击机的流量转发给内网WEB服务器，把内网WEB服务器的流量转发给攻击机。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">4.FRP配置文件</span></strong></h4><p><img data-ratio="0.2694805194805195" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/4_RrnahykSiaNnZ3X835Srt69OcqYPDA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuGzO24l000ARSagwC9VCPtiaiaxgRrnahykSiaNnZ3X835Srt69OcqYPDA/640?wx_fmt=png'" data-type="png" data-w="924"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(1):完整的服务器端配置文件</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer"># [common] 是必需的</span></code><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer"># ipv6的文本地址或主机名必须括在方括号中</span></code><code><span class="code-snippet_outer"># 如"[::1]:80", "[ipv6-host]:http" 或 "[ipv6-host%zone]:80"</span></code><code><span class="code-snippet_outer">bind_addr = 0.0.0.0</span></code><code><span class="code-snippet_outer">bind_port = 7000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># udp nat 穿透端口</span></code><code><span class="code-snippet_outer">bind_udp_port = 7001</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 用于 kcp 协议 的 udp 端口，可以与 "bind_port" 相同</span></code><code><span class="code-snippet_outer"># 如果此项不配置, 服务端的 kcp 将不会启用 </span></code><code><span class="code-snippet_outer">kcp_bind_port = 7000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 指定代理将侦听哪个地址，默认值与 bind_addr 相同</span></code><code><span class="code-snippet_outer"># proxy_bind_addr = 127.0.0.1</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果要支持虚拟主机，必须设置用于侦听的 http 端口（非必需项）</span></code><code><span class="code-snippet_outer"># 提示：http端口和https端口可以与 bind_port 相同</span></code><code><span class="code-snippet_outer">vhost_http_port = 80</span></code><code><span class="code-snippet_outer">vhost_https_port = 443</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 虚拟 http 服务器的响应头超时时间（秒），默认值为60s</span></code><code><span class="code-snippet_outer"># vhost_http_timeout = 60</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 设置 dashboard_addr 和 dashboard_port 用于查看 frps 仪表盘</span></code><code><span class="code-snippet_outer"># dashboard_addr 默认值与 bind_addr 相同</span></code><code><span class="code-snippet_outer"># 只有 dashboard_port 被设定，仪表盘才能生效</span></code><code><span class="code-snippet_outer">dashboard_addr = 0.0.0.0</span></code><code><span class="code-snippet_outer">dashboard_port = 7500</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 设置仪表盘用户密码，用于基础认证保护，默认为 admin/admin</span></code><code><span class="code-snippet_outer">dashboard_user = admin</span></code><code><span class="code-snippet_outer">dashboard_pwd = admin</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 仪表板资产目录(仅用于 debug 模式下)</span></code><code><span class="code-snippet_outer"># assets_dir = ./static</span></code><code><span class="code-snippet_outer"># 控制台或真实日志文件路径，如./frps.log</span></code><code><span class="code-snippet_outer">log_file = ./frps.log</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 日志级别，分为trace（跟踪）、debug（调试）、info（信息）、warn（警告）、error（错误） </span></code><code><span class="code-snippet_outer">log_level = info</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 最大日志记录天数</span></code><code><span class="code-snippet_outer">log_max_days = 3</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 认证 token</span></code><code><span class="code-snippet_outer">token = 12345678</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 心跳配置, 不建议对默认值进行修改</span></code><code><span class="code-snippet_outer"># heartbeat_timeout 默认值为 90</span></code><code><span class="code-snippet_outer"># heartbeat_timeout = 90</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 允许 frpc(客户端) 绑定的端口，不设置的情况下没有限制</span></code><code><span class="code-snippet_outer">allow_ports = 2000-3000,3001,3003,4000-50000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果超过最大值，每个代理中的 pool_count 将更改为 max_pool_count</span></code><code><span class="code-snippet_outer">max_pool_count = 5</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 每个客户端可以使用最大端口数，默认值为0，表示没有限制</span></code><code><span class="code-snippet_outer">max_ports_per_client = 0</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果 subdomain_host 不为空, 可以在客户端配置文件中设置 子域名类型为 http 还是 https</span></code><code><span class="code-snippet_outer"># 当子域名为 test 时, 用于路由的主机为 test.frps.com</span></code><code><span class="code-snippet_outer">subdomain_host = frps.com</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 是否使用 tcp 流多路复用，默认值为 true</span></code><code><span class="code-snippet_outer">tcp_mux = true</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 对 http 请求设置自定义 404 页面</span></code><code><span class="code-snippet_outer"># custom_404_page = /path/to/404.html</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(2):完整的客户端配置文件</span><br  /></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer"># [common] 是必需的</span></code><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer"># ipv6的文本地址或主机名必须括在方括号中</span></code><code><span class="code-snippet_outer"># 如"[::1]:80", "[ipv6-host]:http" 或 "[ipv6-host%zone]:80"</span></code><code><span class="code-snippet_outer">server_addr = 0.0.0.0</span></code><code><span class="code-snippet_outer">server_port = 7000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果要通过 http 代理或 socks5 代理连接 frps，可以在此处或全局代理中设置 http_proxy</span></code><code><span class="code-snippet_outer"># 只支持 tcp协议</span></code><code><span class="code-snippet_outer"># http_proxy = http://user:passwd@192.168.1.128:8080</span></code><code><span class="code-snippet_outer"># http_proxy = socks5://user:passwd@192.168.1.128:1080</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 控制台或真实日志文件路径，如./frps.log</span></code><code><span class="code-snippet_outer">log_file = ./frpc.log</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 日志级别，分为trace（跟踪）、debug（调试）、info（信息）、warn（警告）、error（错误）</span></code><code><span class="code-snippet_outer">log_level = info</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 最大日志记录天数</span></code><code><span class="code-snippet_outer">log_max_days = 3</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 认证 token</span></code><code><span class="code-snippet_outer">token = 12345678</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 设置能够通过 http api 控制客户端操作的管理地址</span></code><code><span class="code-snippet_outer">admin_addr = 127.0.0.1</span></code><code><span class="code-snippet_outer">admin_port = 7400</span></code><code><span class="code-snippet_outer">admin_user = admin</span></code><code><span class="code-snippet_outer">admin_pwd = admin</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 将提前建立连接，默认值为 0</span></code><code><span class="code-snippet_outer">pool_count = 5</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 是否使用 tcp 流多路复用，默认值为 true，必需与服务端相同</span></code><code><span class="code-snippet_outer">tcp_mux = true</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 在此处设置用户名后，代理名称将设置为  {用户名}.{代理名}</span></code><code><span class="code-snippet_outer">user = your_name</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 决定第一次登录失败时是否退出程序，否则继续重新登录到 frps</span></code><code><span class="code-snippet_outer"># 默认为 true</span></code><code><span class="code-snippet_outer">login_fail_exit = true</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 用于连接到服务器的通信协议</span></code><code><span class="code-snippet_outer"># 目前支持 tcp/kcp/websocket, 默认 tcp</span></code><code><span class="code-snippet_outer">protocol = tcp</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果 tls_enable 为 true, frpc 将会通过 tls 连接 frps</span></code><code><span class="code-snippet_outer">tls_enable = true</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 指定 DNS 服务器</span></code><code><span class="code-snippet_outer"># dns_server = 8.8.8.8</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 代理名, 使用 ',' 分隔</span></code><code><span class="code-snippet_outer"># 默认为空, 表示全部代理</span></code><code><span class="code-snippet_outer"># start = ssh,dns</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 心跳配置, 不建议对默认值进行修改</span></code><code><span class="code-snippet_outer"># heartbeat_interval 默认为 10 heartbeat_timeout 默认为 90</span></code><code><span class="code-snippet_outer"># heartbeat_interval = 30</span></code><code><span class="code-snippet_outer"># heartbeat_timeout = 90</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 'ssh' 是一个特殊代理名称</span></code><code><span class="code-snippet_outer">[ssh]</span></code><code><span class="code-snippet_outer"># 协议 tcp | udp | http | https | stcp | xtcp, 默认 tcp</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 22</span></code><code><span class="code-snippet_outer"># 是否加密, 默认为 false</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer"># 是否压缩</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"># 服务端端口</span></code><code><span class="code-snippet_outer">remote_port = 6001</span></code><code><span class="code-snippet_outer"># frps 将为同一组中的代理进行负载平衡连接</span></code><code><span class="code-snippet_outer">group = test_group</span></code><code><span class="code-snippet_outer"># 组应该有相同的组密钥</span></code><code><span class="code-snippet_outer">group_key = 123456</span></code><code><span class="code-snippet_outer"># 为后端服务开启健康检查, 目前支持 'tcp' 和 'http' </span></code><code><span class="code-snippet_outer"># frpc 将连接本地服务的端口以检测其健康状态</span></code><code><span class="code-snippet_outer">health_check_type = tcp</span></code><code><span class="code-snippet_outer"># 健康检查连接超时</span></code><code><span class="code-snippet_outer">health_check_timeout_s = 3</span></code><code><span class="code-snippet_outer"># 连续 3 次失败, 代理将会从服务端中被移除</span></code><code><span class="code-snippet_outer">health_check_max_failed = 3</span></code><code><span class="code-snippet_outer"># 健康检查时间间隔</span></code><code><span class="code-snippet_outer">health_check_interval_s = 10</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[ssh_random]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 22</span></code><code><span class="code-snippet_outer"># 如果 remote_port 为 0 ,frps 将为您分配一个随机端口</span></code><code><span class="code-snippet_outer">remote_port = 0</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 如果要暴露多个端口, 在区块名称前添加 'range:' 前缀</span></code><code><span class="code-snippet_outer"># frpc 将会生成多个代理，如 'tcp_port_6010', 'tcp_port_6011'</span></code><code><span class="code-snippet_outer">[range:tcp_port]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 6010-6020,6022,6024-6028</span></code><code><span class="code-snippet_outer">remote_port = 6010-6020,6022,6024-6028</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[dns]</span></code><code><span class="code-snippet_outer">type = udp</span></code><code><span class="code-snippet_outer">local_ip = 114.114.114.114</span></code><code><span class="code-snippet_outer">local_port = 53</span></code><code><span class="code-snippet_outer">remote_port = 6002</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[range:udp_port]</span></code><code><span class="code-snippet_outer">type = udp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 6010-6020</span></code><code><span class="code-snippet_outer">remote_port = 6010-6020</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 将域名解析到 [server_addr] 可以使用 http://web01.yourdomain.com 访问 web01</span></code><code><span class="code-snippet_outer">[web01]</span></code><code><span class="code-snippet_outer">type = http</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 80</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = true</span></code><code><span class="code-snippet_outer"># http 协议认证</span></code><code><span class="code-snippet_outer">http_user = admin</span></code><code><span class="code-snippet_outer">http_pwd = admin</span></code><code><span class="code-snippet_outer"># 如果服务端域名为 frps.com, 可以通过 http://test.frps.com 来访问 [web01] </span></code><code><span class="code-snippet_outer">subdomain = web01</span></code><code><span class="code-snippet_outer">custom_domains = web02.yourdomain.com</span></code><code><span class="code-snippet_outer"># locations 仅可用于HTTP类型</span></code><code><span class="code-snippet_outer">locations = /,/pic</span></code><code><span class="code-snippet_outer">host_header_rewrite = example.com</span></code><code><span class="code-snippet_outer"># params with prefix "header_" will be used to update http request headers</span></code><code><span class="code-snippet_outer">header_X-From-Where = frp</span></code><code><span class="code-snippet_outer">health_check_type = http</span></code><code><span class="code-snippet_outer"># frpc 将会发送一个 GET http 请求 '/status' 来定位http服务</span></code><code><span class="code-snippet_outer"># http 服务返回 2xx 状态码时即为存活</span></code><code><span class="code-snippet_outer">health_check_url = /status</span></code><code><span class="code-snippet_outer">health_check_interval_s = 10</span></code><code><span class="code-snippet_outer">health_check_max_failed = 3</span></code><code><span class="code-snippet_outer">health_check_timeout_s = 3</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[web02]</span></code><code><span class="code-snippet_outer">type = https</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 8000</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer">subdomain = web01</span></code><code><span class="code-snippet_outer">custom_domains = web02.yourdomain.com</span></code><code><span class="code-snippet_outer"># v1 或 v2 或 空</span></code><code><span class="code-snippet_outer">proxy_protocol_version = v2</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[plugin_unix_domain_socket]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">remote_port = 6003</span></code><code><span class="code-snippet_outer">plugin = unix_domain_socket</span></code><code><span class="code-snippet_outer">plugin_unix_path = /var/run/docker.sock</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[plugin_http_proxy]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">remote_port = 6004</span></code><code><span class="code-snippet_outer">plugin = http_proxy</span></code><code><span class="code-snippet_outer">plugin_http_user = abc</span></code><code><span class="code-snippet_outer">plugin_http_passwd = abc</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[plugin_socks5]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">remote_port = 6005</span></code><code><span class="code-snippet_outer">plugin = socks5</span></code><code><span class="code-snippet_outer">plugin_user = abc</span></code><code><span class="code-snippet_outer">plugin_passwd = abc</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[plugin_static_file]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">remote_port = 6006</span></code><code><span class="code-snippet_outer">plugin = static_file</span></code><code><span class="code-snippet_outer">plugin_local_path = /var/www/blog</span></code><code><span class="code-snippet_outer">plugin_strip_prefix = static</span></code><code><span class="code-snippet_outer">plugin_http_user = abc</span></code><code><span class="code-snippet_outer">plugin_http_passwd = abc</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[plugin_https2http]</span></code><code><span class="code-snippet_outer">type = https</span></code><code><span class="code-snippet_outer">custom_domains = test.yourdomain.com</span></code><code><span class="code-snippet_outer">plugin = https2http</span></code><code><span class="code-snippet_outer">plugin_local_addr = 127.0.0.1:80</span></code><code><span class="code-snippet_outer">plugin_crt_path = ./server.crt</span></code><code><span class="code-snippet_outer">plugin_key_path = ./server.key</span></code><code><span class="code-snippet_outer">plugin_host_header_rewrite = 127.0.0.1</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[secret_tcp]</span></code><code><span class="code-snippet_outer"># 如果类型为 secret tcp, remote_port 将失效</span></code><code><span class="code-snippet_outer">type = stcp</span></code><code><span class="code-snippet_outer"># sk 用来进行访客认证</span></code><code><span class="code-snippet_outer">sk = abcdefg</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 22</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer"># 访客端及服务端的用户名应该相同</span></code><code><span class="code-snippet_outer">[secret_tcp_visitor]</span></code><code><span class="code-snippet_outer"># frpc role visitor -&gt; frps -&gt; frpc role server</span></code><code><span class="code-snippet_outer">role = visitor</span></code><code><span class="code-snippet_outer">type = stcp</span></code><code><span class="code-snippet_outer"># 要访问的服务器名称</span></code><code><span class="code-snippet_outer">server_name = secret_tcp</span></code><code><span class="code-snippet_outer">sk = abcdefg</span></code><code><span class="code-snippet_outer"># 将此地址连接到访客 stcp 服务器</span></code><code><span class="code-snippet_outer">bind_addr = 127.0.0.1</span></code><code><span class="code-snippet_outer">bind_port = 9000</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[p2p_tcp]</span></code><code><span class="code-snippet_outer">type = xtcp</span></code><code><span class="code-snippet_outer">sk = abcdefg</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 22</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[p2p_tcp_visitor]</span></code><code><span class="code-snippet_outer">role = visitor</span></code><code><span class="code-snippet_outer">type = xtcp</span></code><code><span class="code-snippet_outer">server_name = p2p_tcp</span></code><code><span class="code-snippet_outer">sk = abcdefg</span></code><code><span class="code-snippet_outer">bind_addr = 127.0.0.1</span></code><code><span class="code-snippet_outer">bind_port = 9001</span></code><code><span class="code-snippet_outer">use_encryption = false</span></code><code><span class="code-snippet_outer">use_compression = false</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(3):客户端和服务器端部分配置文件</span><br  /></p><p><span style="font-size:16px;line-height:36px;;">这个是下载下来的配置文件，主要看一下frpc.ini和frps.ini这两个配置文件</span></p><p><img data-ratio="0.47633136094674555" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/5_oica3zRs4ge3iacibGGhwreCKficcg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuIP5eJ15Xp9XRq2RZLf4I30qoUMQ8oica3zRs4ge3iacibGGhwreCKficcg/640?wx_fmt=png'" data-type="png" data-w="676"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">介绍一下这个配置文件的参数</span></p><p><span style="font-size:16px;line-height:36px;;">frps.ini的配置文件如下:</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer">bind_port = 7000</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">[common]部分是必须有的配置，其中bind_port是自己设定的frp服务端端口，用于和frp服务器端进行通信。</span></p><p><span style="font-size:16px;line-height:36px;;">token用于验证连接，只有服务端和客户端token相同的时候才能正常访问。如果不使用token，那么所有人都可以直接连接上，所以我建议大家在使用的时候还是把token加上。</span><br  /></p><p><span style="font-size:16px;line-height:36px;;">frpc.ini配置文件如下:</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer">server_addr = VPS IP</span></code><code><span class="code-snippet_outer">server_port = 7000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[ssh]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 22</span></code><code><span class="code-snippet_outer">remote_port = 6000</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">[common]部分是必须有的配置</span></p><p><span style="font-size:16px;line-height:36px;;">其中server addr是VPS的IP</span></p><p><span style="font-size:16px;line-height:36px;;">server port是用来和frp客户端通信的端口，必须和frp服务器端端口一致，默认是7000。</span></p><p><span style="font-size:16px;line-height:36px;;">[ssh]可以修改成任意名称，local ip是本地的IP，local port是本地进行监听的端口，remote port是访问VPS时需要使用的端口，也就是说访问到这个remote port端口时才能访问到内网。</span><br  /></p><p><br  /></p><h3><span style="font-size:18px;line-height:38px;;"><strong>三、FRP使用场景</strong></span></h3><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">1.windows主机</span></strong></h4><ul class="list-paddingleft-2"><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">第一种情况(3389出网)</span></p></li></ul><p><span style="font-size:16px;line-height:36px;;">当我们拿下的这台windows主机开启3389端口时，那就比较好办了，我们可以直接拿到管理员hash解密或者新建用户等直接进行连接，这样我们可以在该主机上执行安装goby等常用的扫描工具，但是这样可能会被管理员发现；当然，我们也可以使用frp进行内网代理，在物理机上通过代理进行扫描。</span></p><ul class="list-paddingleft-2"><li style="font-size:16px;line-height:36px;;"><p><span style="font-size:16px;line-height:36px;;">第二种情况(3389不出网)</span></p></li></ul><p><span style="font-size:16px;line-height:36px;;">当我们拿下的这台内网主机是windows时，也就是内网WEB服务器是windows时，如果这台主机的3389端口没有映射到Nginx服务器上，那么，我们就不能使用远程桌面进行连接，如果需要扫描内网最好的办法就是使用frp等代理工具进行全流量代理，然后使用SocksCap或Proxifier等工具进行代理。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">2.Linux主机</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">当我们拿下的主机是linux主机的时候，我们想要在该主机上安装一些扫描工具，可以使用命令行安装nmap、masscan等工具，但是相对来说容易被发现，因此也可以使用frp来进行代理，并且也不能进行远程桌面，因此，使用frp是相对来说比较好的方法。</span></p><p><br  /></p><h3><span style="font-size:18px;line-height:38px;;"><strong>四、FRP工具的使用</strong></span></h3><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">1.FRP下载</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">FRP使用Golang编写，可以直接下载相应的文件。</span></p><p><span style="font-size:16px;line-height:36px;;">有配置文件:</span></p><p><span style="font-size:16px;line-height:36px;;">https://github.com/fatedier/frp/releases</span></p><p><span style="font-size:16px;line-height:36px;;">不需要配置文件:</span></p><p><span style="font-size:16px;line-height:36px;;">https://github.com/uknowsec/frpModify</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">2.部署</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">解压缩下载的压缩包，将其中的 frpc 拷贝到内网服务所在的机器上，将 frps 拷贝到具有公网 IP 的机器上，放置在任意目录。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">3.常用命令</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">(1):启动frp客户端</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="swift"><code><span class="code-snippet_outer">./frpc -c ./frpc.ini</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(2):后台启动frp客户端</span><br  /></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="nginx"><code><span class="code-snippet_outer">nohup ./frpc -c ./frpc.ini &amp;</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(3):启动frp服务器端</span><br  /></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="swift"><code><span class="code-snippet_outer">./frps -c ./frps.ini</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(4):后台启动frp服务器端</span><br  /></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="nginx"><code><span class="code-snippet_outer">nohub ./frps -c ./frps.ini &amp;</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">(5):控制台</span><br  /></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="properties"><code><span class="code-snippet_outer">wget https://github.com/fatedier/frp/releases/download/v0.9.3/frp_0.34.1_linux_386.tar.gz</span></code><code><span class="code-snippet_outer">tar xzf frp_0.34.1_linux_386.tar.gz</span></code><code><span class="code-snippet_outer">mv frp_0.34.1_linux_386 frp</span></code><code><span class="code-snippet_outer">cd frp</span></code><code><span class="code-snippet_outer">vi frp.ini</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;"># 添加如下内容<br  /></span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer">dashboard_port = 7500</span></code><code><span class="code-snippet_outer">dashboard_user = admin</span></code><code><span class="code-snippet_outer">dashboard_pwd = admin</span></code></pre></section><p><span style="font-size:16px;line-height:36px;;">启动frps</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="swift"><code><span class="code-snippet_outer">./frps -<span class="code-snippet__built_in">c</span> ./frps.ini</span></code></pre></section><p><img data-ratio="0.3220338983050847" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/6_pAx7vxbRI8lkPibiaTEiaIcIrPShWw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuESC28Rbn5ww3AnPG5P4ib9kUQT0UpAx7vxbRI8lkPibiaTEiaIcIrPShWw/640?wx_fmt=png'" data-type="png" data-w="826"  /><br  /></p><p><img data-ratio="0.5725614591593973" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/7_K93lTyDxoo9qPL0TRh9ZgCQl7kHUew.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuTKxdl1jA0EWJSTJq9AytLXztK93lTyDxoo9qPL0TRh9ZgCQl7kHUew/640?wx_fmt=png'" data-type="png" data-w="1261"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">但是这个功能一般没不太会用到。</span></p><p><br  /></p><h3><span style="font-size:18px;line-height:38px;;"><strong>五、FRP工具使用案例</strong></span></h3><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">1.内网环境搭建</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">VPS(FRP服务器端):116.62.106.123</span></p><p><span style="font-size:16px;line-height:36px;;">攻击机(物理机win10):115.171.90.105</span></p><p><span style="font-size:16px;line-height:36px;;">内网WEB服务器(虚拟机win7):192.168.223.151</span></p><p><span style="font-size:16px;line-height:36px;;"><strong>注意:内网WEB服务器必须要出网，这样才能连接VPS的7000端口。</strong></span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">2.使用有配置文件的FRP</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">(1):在VPS上下载FRP服务器端</span></p><p><span style="font-size:16px;line-height:36px;;">这个类型的FRP</span></p><p><img data-ratio="0.0763765541740675" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/8_4vM7pGZdtR2XrGe1RGKcicznz6DgvQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuRdGrp3KzVfDBM0ibYQrH0ExnzC4vM7pGZdtR2XrGe1RGKcicznz6DgvQ/640?wx_fmt=png'" data-type="png" data-w="563"  /></p><p><img data-ratio="0.10443864229765012" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/9_8GBrVKTHaVjciaRaL6WfZRcFobxybg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxugciaricdfMia538rUrj75FicAKOxR8GBrVKTHaVjciaRaL6WfZRcFobxybg/640?wx_fmt=png'" data-type="png" data-w="766"  /></p><p><span style="font-size:16px;line-height:36px;;">(2):在内网服WEB务器(192.168.223.151)上下载frp客户端</span></p><p><img data-ratio="0.38199780461031835" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/10_q5aDxby4cfGiaiclJl9riagC1cXNlA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxu2culc0iasctA5ChyhrXZMwlLvIzEq5aDxby4cfGiaiclJl9riagC1cXNlA/640?wx_fmt=png'" data-type="png" data-w="911"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(3):修改FRP配置文件如下所示</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="ini"><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer">server_addr = 116.62.106.123</span></code><code><span class="code-snippet_outer">server_port = 7000</span></code><code><span class="code-snippet_outer"><br  /></span></code><code><span class="code-snippet_outer">[3389]</span></code><code><span class="code-snippet_outer">type = tcp</span></code><code><span class="code-snippet_outer">local_ip = 127.0.0.1</span></code><code><span class="code-snippet_outer">local_port = 3389</span></code><code><span class="code-snippet_outer">remote_port = 6000</span></code><code><span class="code-snippet_outer">plugin = socks5</span></code></pre></section><p><img data-ratio="0.2841191066997519" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/11_tvSwb2PEZSpN0dFXSDWYU5tuJ5VKqw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuaPJ2ibYXQO4KT9c9L84AflT7utvSwb2PEZSpN0dFXSDWYU5tuJ5VKqw/640?wx_fmt=png'" data-type="png" data-w="806"  /><br  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">注意:说两个需要注意的地方:</span></p><p><span style="font-size:16px;line-height:36px;;">第一个:local_port这块的端口经过测试，可以设置成任意端口，目前在windows主机上测试了3389、22222和22端口都成功了。</span></p><p><span style="font-size:16px;line-height:36px;;">第二个:需要添加上plugin = socks5这一行，因为经过测试，如果不加这一行，使用SocksCap会显示协商代理认证方式失败，因此需要加上这一行。如下图:</span></p><p><img data-ratio="0.4150787075393538" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/12_MuLh8RoMC2hRkujQLQXXFMnuJq74yw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxubSibcGYDxAJfQuz5sSzoBRFZ5MuLh8RoMC2hRkujQLQXXFMnuJq74yw/640?wx_fmt=png'" data-type="png" data-w="1207"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(4):先在VPS(FRP服务器端)执行如下命令</span></p><p><span style="font-size:16px;line-height:36px;;">./frps -c frps.ini</span></p><p><img data-ratio="0.1179245283018868" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/13_B3tpM9WiaHUu9Dj9FKIS8CqzstV9tA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuqb0zQD2NbobmnhJBGcbwfyonnB3tpM9WiaHUu9Dj9FKIS8CqzstV9tA/640?wx_fmt=png'" data-type="png" data-w="848"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(5):然后在FRP客户端执行如下命令</span></p><p><span style="font-size:16px;line-height:36px;;">frpc -c ./frpc.ini</span></p><p><img data-ratio="0.13537549407114624" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/14_iczte3UwHKG8CTSFj4diaWwxpibxjg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxucPYbQYiayuibWVr9SZplNSA9JqdeFiczte3UwHKG8CTSFj4diaWwxpibxjg/640?wx_fmt=png'" data-type="png" data-w="1012"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(6):设置浏览器代理为VPS的6000端口</span></p><p><img data-ratio="0.2580340264650284" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/15_vxA55W3Y9Uk6Vs9uD7zibT4VKptD3w.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuCb8JAibrFHibNPZbSYeqOh8Zia0JvxA55W3Y9Uk6Vs9uD7zibT4VKptD3w/640?wx_fmt=png'" data-type="png" data-w="1058"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(7):成功访问到内网主机</span></p><p><img data-ratio="0.8085561497326204" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/16_NYOiaVNdtTUJdoaJvycTB7BkIlZUZw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuulbyia8zKibrMJbuv1F8B7kPySNNYOiaVNdtTUJdoaJvycTB7BkIlZUZw/640?wx_fmt=png'" data-type="png" data-w="935"  /></p><p><br  /></p><p><br  /></p><h4><span style="font-size:16px;line-height:36px;;">3.使用没有配置文件的FRP</span></h4><p><span style="font-size:16px;line-height:36px;;">https://github.com/uknowsec/frpModify</span></p><p><span style="font-size:16px;line-height:36px;;">(1):在VPS上上传frp服务器端</span></p><p><img data-ratio="0.08093278463648834" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/17_XyS7CUccojWic5qNWKLVXug7icqa4Q.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuWscCph1wHzric8xWwdBm9Tgmd1pXyS7CUccojWic5qNWKLVXug7icqa4Q/640?wx_fmt=png'" data-type="png" data-w="729"  /></p><p><span style="font-size:16px;line-height:36px;;">(2):在内网WEB服务器(192.168.223.151)上上传frp客户端</span></p><p><img data-ratio="0.08620689655172414" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/18_xw7CibHHxic3fBnWSKMiavSunPwElw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuWReodo79gDOJ4LEWzHRBibw1NTsxxw7CibHHxic3fBnWSKMiavSunPwElw/640?wx_fmt=png'" data-type="png" data-w="754"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(3):在VPS上添加配置文件</span></p><p><span style="font-size:16px;line-height:36px;;">配置文件名称如下:</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li><li></li><li></li><li></li></ul><pre class="code-snippet__js" data-lang="makefile"><code><span class="code-snippet_outer">frps.ini</span></code><code><span class="code-snippet_outer">[common]</span></code><code><span class="code-snippet_outer">bind_port = 2333</span></code><code><span class="code-snippet_outer">token = uknowsec</span></code></pre></section><p><img data-backh="95" data-backw="375" data-ratio="0.25333333333333335" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/19_6RfXGpylhOpgf70z6j9snyC1HOfgBA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxugdsKe16wrEG9ZmPrWWVSY4HN6RfXGpylhOpgf70z6j9snyC1HOfgBA/640?wx_fmt=png'" data-type="png" data-w="375" style="width: 100%;height: auto;"  /></p><p><span style="font-size:16px;line-height:36px;;">(4):在VPS上执行如下命令</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="swift"><code><span class="code-snippet_outer">./frps -<span class="code-snippet__built_in">c</span> frps.ini</span></code></pre></section><p><img data-ratio="0.13516896120150187" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/20_lhBMh5hjAP4MdJRxEeqYKgm7dKvlxQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuuwwUQDh9bcnZw81Vqj04eemIlhBMh5hjAP4MdJRxEeqYKgm7dKvlxQ/640?wx_fmt=png'" data-type="png" data-w="799"  /><br  /></p><p><span style="font-size:16px;line-height:36px;;">(5):在内网WEB服务器上执行如下命令</span></p><section class="code-snippet__fix code-snippet__js"><ul class="code-snippet__line-index code-snippet__js"><li></li></ul><pre class="code-snippet__js" data-lang="css"><code><span class="code-snippet_outer"><span class="code-snippet__selector-tag">frpc</span><span class="code-snippet__selector-class">.exe</span> <span class="code-snippet__selector-tag">-t</span> <span class="code-snippet__selector-tag">VPSIP</span> <span class="code-snippet__selector-tag">-p</span> 2333</span></code></pre></section><p><img data-ratio="0.22807017543859648" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/21_67ODnw4orIMFANUPnh7S2ufFxbcMSw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxujianGDRbJmvC3jf9TsmefeRa867ODnw4orIMFANUPnh7S2ufFxbcMSw/640?wx_fmt=png'" data-type="png" data-w="1140"  /><br  /></p><p><span style="font-size:16px;line-height:36px;;">这样FRP就配置成功了。</span></p><p><br  /></p><h4><strong><span style="font-size:16px;line-height:36px;;">4.使用工具通过FRP访问内网</span></strong></h4><p><span style="font-size:16px;line-height:36px;;">为了证明FRP的联通性，下面的操作都是在另一台电脑上进行操作的。</span></p><p><span style="font-size:16px;line-height:36px;;">(1):使用浏览器设置代理访问</span></p><p><span style="font-size:16px;line-height:36px;;">①:设置浏览器代理</span></p><p><img data-ratio="0.3249097472924188" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/22_xaIlPz54PIiaXSQIVcriad3sHkficg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxu6DoXcGuBHibsdQTgjcpoqiaDBTtJcxaIlPz54PIiaXSQIVcriad3sHkficg/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">②:使用代理进行访问</span></p><p><img data-ratio="0.8411552346570397" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/23_I2ziaEfFNgiaScYsctvOjibXc7MRaA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuWWop6MOmWj1Pe4IqicibVsrc1asibAI2ziaEfFNgiaScYsctvOjibXc7MRaA/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">(2):使用SocksCap进行访问</span></p><p><span style="font-size:16px;line-height:36px;;">①:设置SocksCap</span></p><p><img data-ratio="0.43501805054151627" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/24_vhvubILk5hHcb9SvKXL8e7Fx1mdUFA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuWobJJ45icGj2dKjribmmamZHicovhvubILk5hHcb9SvKXL8e7Fx1mdUFA/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">②:使用SocksCap进行访问</span></p><p><img data-ratio="0.5701107011070111" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/25_ib7LeGnQRlSgargCJwWh3jtTROLI1w.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuUt2hC6tbf1RQR9R41ns77C5M8ib7LeGnQRlSgargCJwWh3jtTROLI1w/640?wx_fmt=png'" data-type="png" data-w="542"  /></p><p><br  /></p><p><img data-ratio="0.7815884476534296" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/26_aeOI95licsYZGxibYWWLFWeG3Q2dGA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxu0368DPvwASS02zRxVeuEImE7VAaeOI95licsYZGxibYWWLFWeG3Q2dGA/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><span style="font-size:16px;line-height:36px;;">(3):使用Proxifier进行访问</span></p><p><span style="font-size:16px;line-height:36px;;">①:设置Proxifier</span></p><p><img data-ratio="0.5415162454873647" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/27_3ceMMrwEER4OxYqY5nZfiakoMXgicg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxu6cnWMfIt9blGCYQhwBp3j0Pvdc3ceMMrwEER4OxYqY5nZfiakoMXgicg/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><img data-ratio="0.4963898916967509" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/28_0b8iaRZkX74mEQq0xVUbAwegURXKsA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxu3dWu1dP4bSMN50BmwiauL7N78V0b8iaRZkX74mEQq0xVUbAwegURXKsA/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;">②:所有的应用程序都会走Proxifier代理</span></p><p><img data-ratio="0.8393501805054152" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/29_v2cegSMrEmT3r86hWBGoVYWibjHcyw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibWJgkNvmvYe4Lxnib4gzyxuuEeEJrxiaiaA2gOBrMC54Xib2JT9v2cegSMrEmT3r86hWBGoVYWibjHcyw/640?wx_fmt=png'" data-type="png" data-w="554"  /></p><p><br  /></p><p><span style="font-size:16px;line-height:36px;;"><strong>(4):三种方式的优缺点:</strong></span></p><p><span style="font-size:16px;line-height:36px;;">①:使用浏览器代理比较方便，设置简单，但是只能访问内网中的web服务。</span></p><p><span style="font-size:16px;line-height:36px;;">②:使用SocksCap时，需要使用哪种工具就把该工具导入进去，相对来说比较方便，但是如果需要使用多个工具，每个导入会比较麻烦。</span></p><p><span style="font-size:16px;line-height:36px;;">③:使用Proxifier时，所有的应用都会走代理，这样就会导致有些应用你不想让它走代理也没有办法做到。</span></p><p><br  /></p><figure style="margin: 1.5em 8px;font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);font-size:14px;line-height:34px;;text-align: left;color: rgb(63, 63, 63);line-height: 1.75;"><img data-type="png" data-ratio="0.109375" data-w="640" data-backw="562" data-backh="61" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/30_rsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png'" style="width: 661px;box-sizing: border-box !important;visibility: visible !important;"  /></figure><figure style="margin: 1.5em 8px;font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);font-size:14px;line-height:34px;;text-align: center;color: rgb(63, 63, 63);line-height: 1.75;"><strong><span style="font-size:18px;line-height:38px;;">推荐阅读：</span></strong></figure><figure style="margin: 1.5em 8px;font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);font-size:14px;line-height:34px;;text-align: center;color: rgb(63, 63, 63);line-height: 1.75;"><strong style="font-size:18px;line-height:38px;;"><span style="font-size:18px;line-height:38px;;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI5MDU1NDk2MA==&amp;mid=2247492155&amp;idx=1&amp;sn=3e0a217a784eb250cad2f2f41a488f68&amp;chksm=ec1cb704db6b3e12f9840f33deccebc488f0369cd5e0cd46286c89fbac39f41b52e2436af845&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" style="font-size:18px;line-height:38px;;" data-linktype="2">内网渗透 | 常用的内网穿透工具使用</a></span></strong></figure><p style="font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI5MDU1NDk2MA==&amp;mid=2247492102&amp;idx=1&amp;sn=aa09a4f38ae21b73a1d3a938d97aae20&amp;chksm=ec1cb739db6b3e2f7d7edc43d338e9f2dc4563edc768a34fb4214618f5107ecfc89f9d7b802c&amp;scene=21#wechat_redirect" textvalue="你已选中了添加链接的内容" data-itemshowtype="0" tab="innerlink" data-linktype="1" hasload="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;"><span class="js_jump_icon h5_image_link" data-positionback="static" style="line-height: 0;top: auto;left: auto;right: auto;bottom: auto;"><img class="rich_pages" data-ratio="0.4255555555555556" data-s="300,640" data-type="png" data-w="900" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/31_oDxIic2QaZYKKrLDlJFT5v6EpREmjg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou80h6Jor7Py4sKIwfiaowozsMP0Yjn9RcoJAmPMKa5hQVczeXoDxIic2QaZYKKrLDlJFT5v6EpREmjg/640?wx_fmt=png'" style="border-width: 0px;border-style: initial;border-color: initial;border-radius: 42px;top: auto;left: auto;right: auto;bottom: auto;box-sizing: border-box !important;visibility: visible !important;width: 677px !important;"  /></span></a></p><p style="font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><br  /></p><p style="font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><strong style="color: rgb(255, 104, 39);font-size:14px;line-height:34px;;"><span style="font-size:17px;line-height:37px;;">点赞 在看 转发</span></strong></p><figure style="margin: 1.5em 8px;font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);font-size:14px;line-height:34px;;text-align: right;color: rgb(63, 63, 63);line-height: 1.75;"><span style="font-size:13px;line-height:33px;;">原创投稿作者：想走安全的小白</span></figure><p style="font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><img class="rich_pages __bg_gif" data-ratio="0.5197505197505198" data-type="gif" data-w="962" src="图片/HACK学习呀_2020-11-16_内网渗透FRP代理工具详解/32_EedaMZeibI6cKE55jiaLMf9APuY0pA.gif" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_gif/Uq8QfeuvouibQiaEkicNSzLStibHWxDSDpKeBqxDe6QMdr7M5ld84NFX0Q5HoNEedaMZeibI6cKE55jiaLMf9APuY0pA/640?wx_fmt=gif'" style="box-sizing: border-box !important;visibility: visible !important;width: 677px !important;"  /></p><p><br  /></p>
                </div>
</div>
</body>
</html>